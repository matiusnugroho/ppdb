import{N as G,O as H,u as q,i as B,E as D,r as I,P as K,Q as L,S as Q,T as $}from"./index.js";function U(e){return G()?(H(e),!0):!1}function P(e){return typeof e=="function"?e():q(e)}const J=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const X=Object.prototype.toString,Y=e=>X.call(e)==="[object Object]",N=()=>{},Z=ee();function ee(){var e,t;return J&&((e=window==null?void 0:window.navigator)==null?void 0:e.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((t=window==null?void 0:window.navigator)==null?void 0:t.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function te(e,t){function n(...r){return new Promise((a,c)=>{Promise.resolve(e(()=>t.apply(this,r),{fn:t,thisArg:this,args:r})).then(a).catch(c)})}return n}const z=e=>e();function ne(e=z){const t=I(!0);function n(){t.value=!1}function r(){t.value=!0}const a=(...c)=>{t.value&&e(...c)};return{isActive:K(t),pause:n,resume:r,eventFilter:a}}function re(e){return Q()}function oe(e,t,n={}){const{eventFilter:r=z,...a}=n;return L(e,te(r,t),a)}function ie(e,t,n={}){const{eventFilter:r,...a}=n,{eventFilter:c,pause:m,resume:p,isActive:w}=ne(r);return{stop:oe(e,t,{...a,eventFilter:c}),pause:m,resume:p,isActive:w}}function se(e,t=!0,n){re()?B(e,n):t?e():D(e)}function b(e){var t;const n=P(e);return(t=n==null?void 0:n.$el)!=null?t:n}const F=J?window:void 0;function A(...e){let t,n,r,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,a]=e,t=F):[t,n,r,a]=e,!t)return N;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const c=[],m=()=>{c.forEach(d=>d()),c.length=0},p=(d,f,i,s)=>(d.addEventListener(f,i,s),()=>d.removeEventListener(f,i,s)),w=L(()=>[b(t),P(a)],([d,f])=>{if(m(),!d)return;const i=Y(f)?{...f}:f;c.push(...n.flatMap(s=>r.map(l=>p(d,s,l,i))))},{immediate:!0,flush:"post"}),g=()=>{w(),m()};return U(g),g}let j=!1;function pe(e,t,n={}){const{window:r=F,ignore:a=[],capture:c=!0,detectIframe:m=!1}=n;if(!r)return N;Z&&!j&&(j=!0,Array.from(r.document.body.children).forEach(i=>i.addEventListener("click",N)),r.document.documentElement.addEventListener("click",N));let p=!0;const w=i=>a.some(s=>{if(typeof s=="string")return Array.from(r.document.querySelectorAll(s)).some(l=>l===i.target||i.composedPath().includes(l));{const l=b(s);return l&&(i.target===l||i.composedPath().includes(l))}}),d=[A(r,"click",i=>{const s=b(e);if(!(!s||s===i.target||i.composedPath().includes(s))){if(i.detail===0&&(p=!w(i)),!p){p=!0;return}t(i)}},{passive:!0,capture:c}),A(r,"pointerdown",i=>{const s=b(e);p=!w(i)&&!!(s&&!i.composedPath().includes(s))},{passive:!0}),m&&A(r,"blur",i=>{setTimeout(()=>{var s;const l=b(e);((s=r.document.activeElement)==null?void 0:s.tagName)==="IFRAME"&&!(l!=null&&l.contains(r.document.activeElement))&&t(i)},0)})].filter(Boolean);return()=>d.forEach(i=>i())}const O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_="__vueuse_ssr_handlers__",ae=ue();function ue(){return _ in O||(O[_]=O[_]||{}),O[_]}function le(e,t){return ae[e]||t}function ce(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const fe={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},M="vueuse-storage";function me(e,t,n,r={}){var a;const{flush:c="pre",deep:m=!0,listenToStorageChanges:p=!0,writeDefaults:w=!0,mergeDefaults:g=!1,shallow:d,window:f=F,eventFilter:i,onError:s=o=>{console.error(o)},initOnMounted:l}=r,h=(d?$:I)(typeof t=="function"?t():t);if(!n)try{n=le("getDefaultStorage",()=>{var o;return(o=F)==null?void 0:o.localStorage})()}catch(o){s(o)}if(!n)return h;const v=P(t),T=ce(v),S=(a=r.serializer)!=null?a:fe[T],{pause:V,resume:W}=ie(h,()=>k(h.value),{flush:c,deep:m,eventFilter:i});f&&p&&se(()=>{A(f,"storage",E),A(f,M,R),l&&E()}),l||E();function C(o,u){f&&f.dispatchEvent(new CustomEvent(M,{detail:{key:e,oldValue:o,newValue:u,storageArea:n}}))}function k(o){try{const u=n.getItem(e);if(o==null)C(u,null),n.removeItem(e);else{const y=S.write(o);u!==y&&(n.setItem(e,y),C(u,y))}}catch(u){s(u)}}function x(o){const u=o?o.newValue:n.getItem(e);if(u==null)return w&&v!=null&&n.setItem(e,S.write(v)),v;if(!o&&g){const y=S.read(u);return typeof g=="function"?g(y,v):T==="object"&&!Array.isArray(y)?{...v,...y}:y}else return typeof u!="string"?u:S.read(u)}function E(o){if(!(o&&o.storageArea!==n)){if(o&&o.key==null){h.value=v;return}if(!(o&&o.key!==e)){V();try{(o==null?void 0:o.newValue)!==S.write(h.value)&&(h.value=x(o))}catch(u){s(u)}finally{o?D(W):W()}}}}function R(o){E(o.detail)}return h}export{pe as o,me as u};
