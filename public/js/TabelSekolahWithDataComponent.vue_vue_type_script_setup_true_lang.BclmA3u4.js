import{d as W,h as m,A as H,l as w,o as q,a as n,c as o,b as e,t as r,e as p,C as z,g as x,u as d,F as g,k as c,j,n as R,L as X}from"../index.js";import{_ as G}from"./NoDataComponent.vue_vue_type_script_setup_true_lang.0N8bNYdP.js";import{u as Q}from"./usePendaftaran.DplSNUYV.js";import{u as Y,a as Z}from"./useSekolah.QCvUQrm2.js";import{S as ee,b as ae}from"./buatOption.C8iYn14X.js";import{u as te}from"./useKecamatan.BULQhWxi.js";import{j as le}from"./jenjang.DlmV0PPG.js";import{F as L}from"./FilterSelect.DskikzV_.js";const ne={class:"flex flex-col h-full rounded-xl bg-white shadow-sm border border-gray-100 overflow-hidden"},oe={class:"p-6 border-b border-gray-100"},se={class:"flex flex-wrap justify-between gap-4 items-center"},re={class:"text-lg font-bold text-gray-800"},de={class:"flex flex-wrap justify-end gap-2 items-center"},ue={class:"w-full sm:w-auto"},ie={class:"inline-flex rounded-lg shadow-sm"},pe={class:"tooltip","data-tip":"Download Excel"},ge={key:0,class:"tooltip","data-tip":"Import Excel"},ce={class:"inline-block p-2.5 text-gray-500 hover:bg-gray-50 hover:text-blue-600 transition-colors rounded-r-lg",title:"Delete Product"},me={class:"text-sm font-medium text-gray-500 bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-100"},be={class:"flex-grow overflow-x-auto overflow-y-auto max-h-[calc(100vh-300px)] custom-scrollbar"},fe={class:"table table-zebra table-pin-rows"},ke={key:1},ve={colspan:"5",class:"text-center"},ye={class:"rounded-b-lg border-t border-gray-200 px-4 py-2"},_e={class:"flex justify-end gap-1 text-xs font-medium"},he={key:0},we=["onClick"],xe={key:1},ze=W({__name:"TabelSekolahWithDataComponent",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1},needimportbutton:{type:Boolean,default:!1},title:{type:String,default:"Data Sekolah"}},setup(b){const{kecamatanList:O,fetchKecamatan:E}=te(),v=m(""),y=m(""),_=m(),A=H(()=>{const s=ae(O.value,"nama","id");return[{value:null,label:"Semua Kecamatan"},...s]}),B=m([{label:"Semua Jenjang",value:null},...le]),K=m([{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"Semua",value:"all"}]),a=Y(),{fetchAllSekolah:i,loadingSekolah:S,dataSekolah:f}=Z();w(v,s=>{a.kecamatan_id=s,i(a.per_page,1,a.jenjang,a.kecamatan_id)}),w(y,s=>{a.jenjang=s,i(a.per_page,1,a.jenjang,a.kecamatan_id)}),w(_,s=>{a.per_page=s,i(a.per_page,1,a.jenjang,a.kecamatan_id)});const $=s=>{a.page=s,a.currentPage=s,i(a.per_page,a.page,a.jenjang,a.kecamatan_id)},J=()=>{a.page=a.page+1,a.currentPage=a.currentPage+1,i(a.per_page,a.page,a.jenjang,a.kecamatan_id)},F=()=>{a.page=a.page-1,a.currentPage=a.currentPage-1,i(a.per_page,a.page,a.jenjang,a.kecamatan_id)},M=()=>{const s=X.DOWNLOAD_EXCEL_SEKOLAH_WITH_DATA,t=new URLSearchParams;a.jenjang!==null&&t.append("jenjang",a.jenjang),a.kecamatan_id!==null&&t.append("kecamatan_id",a.kecamatan_id),a.per_page!==null&&t.append("per_page",a.per_page),a.page!==null&&t.append("page",a.page);const k=`${s}?${t.toString()}`;window.open(k,"_blank")},{fetchJalurPendaftaran:U,dataJalurPendaftaran:h}=Q();return q(async()=>{await a.resetTodefault(),E(),i(a.per_page,a.page,a.jenjang,a.kecamatan_id),U()}),(s,t)=>{var k,P,N,C,D,T;return n(),o("div",ne,[e("div",oe,[e("div",se,[e("h3",re,r(b.title),1),e("div",de,[e("div",ue,[p(ee,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=l=>_.value=l),name:"per_page",options:K.value,class:"w-full sm:w-auto"},null,8,["modelValue","options"])]),e("div",ie,[e("div",pe,[e("button",{class:"inline-block border-e p-2.5 text-gray-500 hover:bg-gray-50 hover:text-blue-600 transition-colors rounded-l-lg border-gray-200",title:"Edit Product",onClick:M},[p(z,{name:"file-spreadsheet",size:"18",class:"h-5 w-5"})])]),b.needimportbutton?(n(),o("div",ge,[e("button",ce,[p(z,{name:"upload-double",size:"18",class:"h-5 w-5"})])])):x("",!0)]),e("span",me," Total: "+r(d(S)?"...":(k=d(f))==null?void 0:k.total),1)])])]),e("div",be,[e("table",fe,[e("thead",null,[e("tr",null,[t[3]||(t[3]=e("th",null,"Nama Sekolah",-1)),e("td",null,[p(L,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=l=>y.value=l),options:B.value,class:"w-full",placeholder:"Jenjang",customClasses:"border-0 shadow-none"},null,8,["modelValue","options"])]),t[4]||(t[4]=e("td",null,"NSS",-1)),t[5]||(t[5]=e("td",null,"NPSN",-1)),t[6]||(t[6]=e("td",null,"Daya Tampung",-1)),(n(!0),o(g,null,c(d(h),(l,u)=>(n(),o("td",{key:u},r(l.name),1))),128)),e("td",null,[p(L,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=l=>v.value=l),options:A.value,class:"w-full",placeholder:"Kecamatan",customClasses:"border-0 shadow-none"},null,8,["modelValue","options"])])])]),e("tbody",null,[d(S)?(n(),o(g,{key:0},c(5,l=>e("tr",{key:l},t[7]||(t[7]=[e("th",null,[e("span",{class:"skeleton h-4 w-36 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1)]))),64)):((P=d(f))==null?void 0:P.data.length)===0?(n(),o("tr",ke,[e("th",ve,[p(G,{title:"Data Sekolah",message:"Data Tidak Ditemukan"})])])):(n(!0),o(g,{key:2},c((N=d(f))==null?void 0:N.data,(l,u)=>(n(),o("tr",{key:u},[e("th",null,r(l.nama_sekolah),1),e("td",null,r(l.jenjang),1),e("td",null,r(l.nss),1),e("td",null,r(l.npsn),1),e("td",null,r(l.daya_tampung),1),(n(!0),o(g,null,c(d(h),(V,I)=>(n(),o("td",{key:I},r(l.path_counts&&l.path_counts[V.name]?l.path_counts[V.name]:0),1))),128)),e("td",null,r(l.kecamatan.nama),1)]))),128))]),e("tfoot",null,[e("tr",null,[t[8]||(t[8]=e("th",null,"Nama Sekolah",-1)),t[9]||(t[9]=e("td",null,"Jenjang",-1)),t[10]||(t[10]=e("td",null,"NSS",-1)),t[11]||(t[11]=e("td",null,"NPSN",-1)),t[12]||(t[12]=e("td",null,"Daya Tampung",-1)),(n(!0),o(g,null,c(d(h),(l,u)=>(n(),o("td",{key:u},r(l.name),1))),128)),t[13]||(t[13]=e("td",null,"Kecamatan",-1))])])])]),e("div",ye,[e("ol",_e,[(C=b.data)!=null&&C.prevPage?(n(),o("li",he,[e("a",{onClick:j(F,["prevent"]),href:"#cikontot",class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180"},t[14]||(t[14]=[e("span",{class:"sr-only"},"Prev Page",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"size-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))])):x("",!0),(n(!0),o(g,null,c(Array.from({length:((D=d(f))==null?void 0:D.lastPage)||1},(l,u)=>u+1),l=>(n(),o("li",{key:l},[e("a",{href:"#",class:R(["block size-8 rounded border text-center leading-8",d(a).currentPage===l?"bg-primary text-white border-primary hover:bg-blue-500":"text-gray-900 border-gray-100 bg-white hover:bg-gray-100"]),onClick:j(u=>$(l),["prevent"])},r(l),11,we)]))),128)),(T=b.data)!=null&&T.nextPage?(n(),o("li",xe,[e("a",{onClick:j(J,["prevent"]),href:"#cikontot",class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180"},t[15]||(t[15]=[e("span",{class:"sr-only"},"Next Page",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"size-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]))])):x("",!0)])])])}}});export{ze as _};
