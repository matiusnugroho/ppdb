import{d as R,h as i,I as T,Q as B,o as I,a as v,p as w,w as u,e as t,T as L,c as A,u as d,f as b,t as E,g as S,b as n,j as M,q as N,B as P,r as U,_ as q}from"../index.js";import{_ as F,P as G}from"./PlainLayout.DTxR3Fxk.js";import{I as j}from"./InputGroup.CGOI8iZn.js";import{_ as D}from"./PasswordInput.vue_vue_type_script_setup_true_lang.DkrJuUef.js";import{I as K,A as $,g as O}from"./AlertSuccess.DVwU4fFw.js";import{u as z}from"./authComposable.sKl44bRY.js";import{_ as Q}from"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CQvHfLuO.js";import"./logo-ppdb.BW9ypDwz.js";import"./login-ilustrasi.CSbcqYU5.js";const W={key:0,class:"mb-2 mt-4"},H={class:"mb-5 mt-6"},J=["disabled"],X={class:"flex items-center"},Y={class:"mt-6 text-center"},Z={class:"font-medium"},ee=R({__name:"SigninView",setup(ae){const c=i(""),p=i(""),r=i(!1),s=i(!1),l=i(""),{login:V}=z(),f=N(),x=T(),g=B(),C=async()=>{try{await O()}catch{P({message:"Gagal mengambil CSRF token, silakan muat ulang halaman login ini",type:"warning",duration:5e3,autoClose:!0})}},y=async()=>{var o,a,m;r.value=!0,s.value=!1;try{await V(c.value,p.value)}catch(e){((o=e==null?void 0:e.response)==null?void 0:o.status)===401||((a=e==null?void 0:e.response)==null?void 0:a.status)===422?(s.value=!0,l.value="Username atau password salah"):((m=e==null?void 0:e.response)==null?void 0:m.status)===429?(s.value=!0,l.value="Terlalu banyak percobaan login, coba lagi beberapa saat"):(e==null?void 0:e.code)==="ERR_NETWORK"?(s.value=!0,l.value="Koneksi internet bermasalah"):(s.value=!0,l.value="Sepertinya jaringan anda atau server kami mengalami masalah, coba lagi beberapa saat")}finally{r.value=!1}};return I(async()=>{const o=f.query.intended||"/dashboard";x.intendedURL=o,f.query.prompt&&(s.value=!0,l.value=f.query.prompt),await C()}),(o,a)=>{const m=U("router-link");return v(),w(G,null,{default:u(()=>[t(F,{subtitle:"PPDB Online Kuantan Singingi v1",title:"Login"},{default:u(()=>{var e,k,h;return[t(L,{name:"fade-slide-up"},{default:u(()=>[s.value?(v(),A("div",W,[t(d(K),{icon:"",type:"danger"},{default:u(()=>[b(E(l.value),1)]),_:1})])):S("",!0)]),_:1}),(e=d(g).messages)!=null&&e.success?(v(),w($,{key:0,class:"mb-5",message:(k=d(g).messages)==null?void 0:k.success.title,detail:(h=d(g).messages)==null?void 0:h.success.detail},null,8,["message","detail"])):S("",!0),n("form",{onSubmit:M(y,["prevent"])},[t(j,{name:"username",label:"Email / Username",type:"email",placeholder:"Enter your email",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=_=>c.value=_)},null,8,["modelValue"]),t(D,{label:"Password anda",modelValue:p.value,"onUpdate:modelValue":a[1]||(a[1]=_=>p.value=_)},null,8,["modelValue"]),n("div",H,[n("button",{type:"submit",class:"w-full flex justify-center items-center cursor-pointer rounded-lg border border-primary bg-primary p-2 font-medium text-white transition hover:bg-opacity-90",onClick:y,disabled:r.value},[n("span",X,[t(Q,{loading:r.value,size:"xs"},null,8,["loading"]),a[2]||(a[2]=n("span",{class:"ml-2"},"Login",-1))])],8,J)]),n("div",Y,[n("p",Z,[a[4]||(a[4]=b(" Belum Mempunyai Akun? ")),t(m,{to:"/daftar",class:"text-primary"},{default:u(()=>a[3]||(a[3]=[b("Daftar")])),_:1})])])],32)]}),_:1})]),_:1})}}}),de=q(ee,[["__scopeId","data-v-749d9980"]]);export{de as default};
