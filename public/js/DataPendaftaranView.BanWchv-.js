import{_ as se,n as ae,a as re}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.6-Gez_Sj.js";import{d as oe,h as b,o as le,a as u,c as f,e as o,w as q,b as e,u as s,C as i,g as E,n as x,p as ie,f as F,t as n,F as R,k as ne,q as de,B as _}from"../index.js";import{u as ce}from"./usePendaftaran.DplSNUYV.js";import{_ as ue}from"./ConfirmationComponent.vue_vue_type_script_setup_true_lang.BkkGE_n-.js";import{g as G}from"./getDataById.CToqdZWp.js";import{_ as ge}from"./ModalComponent.vue_vue_type_script_setup_true_lang.UEeJILJd.js";import{T as fe}from"./TextAreaGroup.zZQPhliB.js";import{h as me}from"./hasError.DGV2MSht.js";import"./authComposable.sKl44bRY.js";import"./logo-ppdb.BW9ypDwz.js";import"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CQvHfLuO.js";import"./index.BB3keK1r.js";import"./formValidationErrors.YeWR-HPr.js";const xe={diverifikasi:"text-green-700 bg-green-100","menunggu verifikasi":"text-yellow-700 bg-yellow-100","belum upload":"text-gray-700 bg-gray-100",ditolak:"text-red-700 bg-red-100",pending:"text-yellow-700 bg-yellow-100"},pe={class:"container mx-auto"},be={class:"flex flex-wrap -mx-4"},_e={class:"w-full md:w-1/2 px-4 mb-6 md:mb-0"},he={class:"overflow-hidden rounded-xl border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark pt-10"},ye={class:"flex flex-col items-center relative px-4"},ke={class:"relative"},ve=["src"],we={key:0,class:"absolute bottom-1 right-2 bg-white rounded-full p-1 shadow-sm"},je={class:"mt-4 text-xl font-bold text-gray-800 dark:text-white"},Ve={class:"text-gray-500 text-sm font-medium mt-1"},Ce={class:"p-6"},ze={class:"space-y-5"},Te={class:"flex items-start"},Be={class:"font-bold text-gray-700 dark:text-gray-300"},De={class:"flex items-start"},Me={class:"font-bold text-gray-700 dark:text-gray-300"},Ne={class:"space-y-5"},Ae={class:"flex items-start"},Le={class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},Pe={class:"font-bold text-gray-700 dark:text-gray-300"},$e={class:"flex items-start"},He={class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},Se={class:"font-bold text-gray-700 dark:text-gray-300"},Ie={class:"flex items-start"},qe={class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},Ee={class:"font-bold text-gray-700 dark:text-gray-300"},Fe={class:"flex items-start"},Re={class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},Ge={class:"font-bold text-gray-700 dark:text-gray-300"},Oe={class:"flex items-start"},Ue={class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},Ye={class:"font-bold text-gray-700 dark:text-gray-300"},Je={class:"w-full md:w-1/2 px-2"},Ke={class:"overflow-hidden rounded-sm p-2 border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Qe={class:"space-y-1"},We={class:"flex items-center w-full md:w-auto"},Xe={class:"flex-shrink-0 bg-blue-50 rounded-lg p-2 mr-4"},Ze={class:"flex-1"},et={class:"text-sm font-bold text-gray-800"},tt={class:"mt-1"},st={class:"flex items-center gap-2 w-full md:w-auto justify-end"},at=["data-tip"],rt=["href"],ot={key:1,class:"flex items-center justify-center w-9 h-9 rounded-lg bg-gray-100 text-gray-400 cursor-not-allowed"},lt=["disabled","onClick"],it=["disabled","onClick"],wt=oe({__name:"DataPendaftaranView",setup(nt){const O=de().params.id,{getDetailVerifikasi:U,dataDetailVerifikasi:a,loadingVerifikasi:h,verifikasiDokumen:Y,rejectDokumen:J}=ce(),g=b(null),y=b(null),c=b(""),p=b(""),K=l=>{var t;c.value="",c.value=l,g.value&&((t=g.value)==null||t.show())},Q=l=>{var t;c.value="",p.value="",c.value=l,(t=y.value)==null||t.show()},W=async()=>{var t;const l=await Y(c.value);if(l.success){(t=g.value)==null||t.close();let d=G(a.value.documents,c.value);d&&(d.status=l.data.status),_({type:"success",message:"Verifikasi pendaftaran berhasil"})}else _({type:"error",message:"Verifikasi document gagal, "+l.message})},X=async()=>{var d;const l=p.value,t=await J(c.value,l);if(t.success){(d=g.value)==null||d.close();let m=G(a.value.documents,c.value);m&&(m.status=t.data.status),_({type:"success",message:"Verifikasi pendaftaran berhasil"})}else _({type:"error",message:"Verifikasi document gagal, "+t.message})},Z=()=>{},ee=()=>{var l;c.value="",(l=g.value)==null||l.close()};return le(async()=>{await U(O)}),(l,t)=>(u(),f(R,null,[o(re,null,{default:q(()=>{var d,m,k,v,w,j,V,C,z,T,B,D,M,N,A,L,P,$,H;return[o(se,{pageTitle:"Data Pendaftaran"}),e("div",pe,[e("div",be,[e("div",_e,[e("div",he,[e("div",ye,[e("div",ke,[e("img",{class:"w-32 h-32 rounded-full border-4 border-white object-cover shadow-md bg-white hover:scale-105 transition-transform duration-300",src:((d=s(a))==null?void 0:d.student.thumbnail_url)||s(ae),alt:"Student Photo"},null,8,ve),((m=s(a))==null?void 0:m.status)==="Terverifikasi"?(u(),f("div",we,[o(i,{name:"check-circle",size:"20",class:"text-green-500"})])):E("",!0)]),e("div",{class:x(["mt-4 px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wide border flex items-center gap-1",{"bg-green-100 text-green-600 border-green-200":((k=s(a))==null?void 0:k.status)==="Terverifikasi","bg-yellow-100 text-yellow-600 border-yellow-200":((v=s(a))==null?void 0:v.status)==="Proses Verifikasi","bg-red-100 text-red-600 border-red-200":((w=s(a))==null?void 0:w.status)==="Ditolak","bg-gray-100 text-gray-600 border-gray-200":!((j=s(a))!=null&&j.status)}])},[((V=s(a))==null?void 0:V.status)==="Terverifikasi"?(u(),ie(i,{key:0,name:"check-circle",size:"16"})):E("",!0),F(" "+n(((C=s(a))==null?void 0:C.status)||"Belum Ada Status"),1)],2),e("h2",je,n((z=s(a))==null?void 0:z.student.nama),1),e("p",Ve,"NISN: "+n((T=s(a))==null?void 0:T.student.nisn),1)]),e("div",Ce,[t[10]||(t[10]=e("hr",{class:"border-gray-100 my-4"},null,-1)),t[11]||(t[11]=e("h3",{class:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4"},"Info Pendaftaran",-1)),e("div",ze,[e("div",Te,[t[2]||(t[2]=e("div",{class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},[e("span",{class:"text-gray-400 font-bold text-lg"},"#")],-1)),e("div",null,[t[1]||(t[1]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"Nomor Pendaftaran",-1)),e("p",Be,n((B=s(a))==null?void 0:B.registration_number),1)])]),e("div",De,[t[4]||(t[4]=e("div",{class:"w-10 h-10 rounded-lg bg-gray-50 flex items-center justify-center mr-4 flex-shrink-0"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})])],-1)),e("div",null,[t[3]||(t[3]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"Diverifikasi Oleh",-1)),e("p",Me,n(((M=(D=s(a))==null?void 0:D.verified_by)==null?void 0:M.username)||"-"),1)])])]),t[12]||(t[12]=e("h3",{class:"text-xs font-bold text-gray-400 uppercase tracking-wider mt-8 mb-4"},"Biodata Siswa",-1)),e("div",Ne,[e("div",Ae,[e("div",Le,[o(i,{name:"map-pin",size:"20",class:"text-gray-400"})]),e("div",null,[t[5]||(t[5]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"Tempat Lahir",-1)),e("p",Pe,n((N=s(a))==null?void 0:N.student.tempat_lahir),1)])]),e("div",$e,[e("div",He,[o(i,{name:"calendar",size:"20",class:"text-gray-400"})]),e("div",null,[t[6]||(t[6]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"Tanggal Lahir",-1)),e("p",Se,n((A=s(a))==null?void 0:A.student.tanggal_lahir),1)])]),e("div",Ie,[e("div",qe,[o(i,{name:"user-circle",size:"20",class:"text-gray-400"})]),e("div",null,[t[7]||(t[7]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"Nama Ayah",-1)),e("p",Ee,n((L=s(a))==null?void 0:L.student.nama_bapak),1)])]),e("div",Fe,[e("div",Re,[o(i,{name:"user-circle",size:"20",class:"text-gray-400"})]),e("div",null,[t[8]||(t[8]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"Nama Ibu",-1)),e("p",Ge,n((P=s(a))==null?void 0:P.student.nama_ibu),1)])]),e("div",Oe,[e("div",Ue,[o(i,{name:"phone",size:"20",class:"text-gray-400"})]),e("div",null,[t[9]||(t[9]=e("p",{class:"text-xs text-gray-400 font-bold uppercase"},"No. Handphone",-1)),e("p",Ye,n(($=s(a))==null?void 0:$.student.no_hp_ortu),1)])])])])])]),e("div",Je,[e("div",Ke,[t[13]||(t[13]=e("h2",{class:"text-xl font-semibold mb-2"},"Documents",-1)),e("div",Qe,[(u(!0),f(R,null,ne((H=s(a))==null?void 0:H.documents,r=>{var S,I;return u(),f("div",{key:r.id,class:"bg-white shadow-sm rounded-xl border border-gray-100 w-full p-4 flex flex-col md:flex-row items-center justify-between gap-4 transition hover:shadow-md"},[e("div",We,[e("div",Xe,[o(i,{name:"document-text",size:"24",class:"text-blue-600"})]),e("div",Ze,[e("h2",et,n((I=(S=r.path_requirement)==null?void 0:S.document_type)==null?void 0:I.label),1),e("div",tt,[e("span",{class:x(["inline-block px-2 py-1 text-sm font-medium rounded-full",s(xe)[r.status]])},n(r.status),3)])])]),e("div",st,[e("div",{class:"tooltip","data-tip":r.url_path?"Lihat":"Tidak ada file"},[r.url_path?(u(),f("a",{key:0,href:r.url_path,class:x(["flex items-center justify-center w-9 h-9 rounded-lg transition-colors",r.url_path?"bg-blue-50 text-blue-600 hover:bg-blue-100 hover:text-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"]),target:"_blank",rel:"noopener noreferrer"},[o(i,{name:"eye",size:"18"})],10,rt)):(u(),f("span",ot,[o(i,{name:"eye",size:"18"})]))],8,at),e("button",{disabled:!r.url_path||r.status==="diverifikasi",class:x(["flex items-center justify-center w-9 h-9 rounded-lg transition-colors",r.url_path&&r.status!=="diverifikasi"?"bg-green-50 text-green-600 hover:bg-green-100 hover:text-green-700":"bg-gray-100 text-gray-400 cursor-not-allowed"]),onClick:te=>K(r.id)},[o(i,{name:"check",size:"18"})],10,lt),e("button",{disabled:!r.url_path,class:x(["flex items-center justify-center w-9 h-9 rounded-lg transition-colors",{"bg-red-50 text-red-600 hover:bg-red-100 hover:text-red-700":r.url_path,"bg-gray-100 text-gray-400 cursor-not-allowed":!r.url_path}]),onClick:te=>Q(r.id)},[o(i,{name:"x-mark",size:"18"})],10,it)])])}),128))])])])])])]}),_:1}),o(ue,{ref_key:"verifikasiModal",ref:g,title:"Verifikasi dokumen",message:"Apakah anda yakin ingin verifikasi dokumen ini?",confirmLabel:"Ya","close-on-click-outside":!0,cancelLabel:"Batal",loading:s(h),confirmHandler:W,cancelHandler:ee},null,8,["loading"]),o(ge,{ref_key:"rejectModal",ref:y,title:"Tolak dokumen",message:"Apakah anda yakin ingin menolak dokumen ini?",confirmLabel:"Reject","close-on-click-outside":!0,cancelLabel:"Batal",loading:s(h),confirmHandler:X,cancelHandler:Z},{default:q(()=>[o(fe,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=d=>p.value=d),error:s(me)("rejectMessage"),name:"rejectMessage",label:"Alasan ditolak"},null,8,["modelValue","error"])]),_:1},8,["loading"]),t[14]||(t[14]=F("> "))],64))}});export{wt as default};
