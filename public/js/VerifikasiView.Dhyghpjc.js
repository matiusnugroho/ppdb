import{_ as P,a as D}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.6-Gez_Sj.js";import{u as F}from"./usePendaftaran.DplSNUYV.js";import{d as I,h as f,o as j,a as l,p as K,w as L,b as s,e as h,u as o,c as i,t as d,g,k as V,F as B,n as M,C as b}from"../index.js";import{g as q}from"./getDataById.CToqdZWp.js";import{_ as E}from"./NoDataComponent.vue_vue_type_script_setup_true_lang.0N8bNYdP.js";import"./authComposable.sKl44bRY.js";import"./logo-ppdb.BW9ypDwz.js";const A={class:"mx-auto"},G={class:"rounded-sm border border-stroke bg-white px-5 pt-6 pb-2.5 shadow-default dark:border-strokedark dark:bg-boxdark sm:px-7.5 xl:pb-1"},H={class:"flex justify-between items-center mb-6"},J={key:0,class:"text-black dark:text-white"},O={class:"overflow-x-auto"},Q={class:"table"},R={key:1},U={colspan:"4",class:"text-center"},W={class:"flex items-center gap-3"},X={class:"avatar"},Y={class:"mask mask-squircle h-12 w-12"},Z=["src","alt"],p={class:"text-black dark:text-white font-medium font-semibold"},ss={class:"text-center"},es={class:"flex flex-col items-center justify-center text-center align-middle py-5 px-4"},ts={key:0,class:"badge badge-warning"},ls={class:"text-center"},is=["checked","disabled","onChange"],os={class:"py-5 px-4"},cs={class:"flex items-center space-x-3.5"},ns={class:"tooltip","data-tip":"Lihat"},as=["href"],ds={key:1,class:"flex items-center cursor-not-allowed text-gray-400"},us={class:"tooltip","data-tip":"Verifikasi"},rs=["onClick","disabled"],ws=I({__name:"VerifikasiView",setup(_s){const N=f("Verifikasi"),{dataPendaftar:u,loadingVerifikasi:v,totalPendaftar:w,getVerifiedByMe:S,luluskan:$}=F(),m=f(null),T=x=>{};async function z(x,t){var _;const r=x.target,k=r.checked?"lulus":"tidak_lulus",c=q(u.value,t);if(!c)return;m.value=t;const n=await $(c.id,k);n!=null&&n.success?u.value=(_=u.value)==null?void 0:_.map(a=>a.id===t?{...a,kelulusan:k}:a):r.checked=c.kelulusan==="lulus",m.value=null}return j(()=>{S()}),(x,t)=>(l(),K(D,null,{default:L(()=>{var r;return[s("div",A,[h(P,{pageTitle:N.value},null,8,["pageTitle"]),s("div",G,[s("div",H,[t[0]||(t[0]=s("h2",{class:"text-xl font-semibold text-black dark:text-white"},"Daftar Siswa Pendaftar",-1)),o(w)?(l(),i("p",J,"Total "+d(o(w))+" Calon Siswa",1)):g("",!0)]),s("div",O,[s("table",Q,[t[2]||(t[2]=s("thead",null,[s("tr",null,[s("th",{class:"text-left"},"Name"),s("th",{class:"text-center"},"NISN"),s("th",{class:"text-center"},"Status"),s("th",null,"Kelulusan"),s("th")])],-1)),s("tbody",null,[o(v)?(l(),i(B,{key:0},V(2,e=>s("tr",{key:e},t[1]||(t[1]=[s("td",null,[s("div",{class:"flex items-center gap-3"},[s("div",{class:"avatar"},[s("div",{class:"skeleton rounded-full h-12 w-12"})]),s("div",null,[s("div",{class:"skeleton h-4 w-24 rounded"}),s("div",{class:"skeleton h-4 w-24 rounded mt-2"})])])],-1),s("td",null,[s("span",{class:"skeleton h-4 w-36 rounded block"})],-1),s("td",{class:"text-center"},[s("button",{class:"btn btn-ghost btn-xs"},"Status")],-1),s("td",null,null,-1)]))),64)):g("",!0),((r=o(u))==null?void 0:r.length)===0?(l(),i("tr",R,[s("td",U,[h(E,{title:"Tidak ada data",message:"Belum ada pendaftar"})])])):(l(!0),i(B,{key:2},V(o(u),(e,k)=>{var c,n,_,a,y;return l(),i("tr",{key:k},[s("td",null,[s("div",W,[s("div",X,[s("div",Y,[s("img",{src:(c=e==null?void 0:e.student)==null?void 0:c.thumbnail_url,alt:`Foto ${(n=e==null?void 0:e.student)==null?void 0:n.nama}`,class:"rounded-full h-12 w-12"},null,8,Z)])]),s("div",null,[s("div",p,d((_=e==null?void 0:e.student)==null?void 0:_.nama),1),s("div",null,d(e.registration_number),1)])])]),s("td",ss,d((a=e==null?void 0:e.student)==null?void 0:a.nisn),1),s("td",es,[s("div",null,d(e==null?void 0:e.status),1),(e==null?void 0:e.status)==="diverifikasi"?(l(),i("div",ts,d((y=e.verified_by)==null?void 0:y.username),1)):g("",!0)]),s("td",ls,[s("input",{type:"checkbox",class:M(["toggle toggle-success",["toggle-success",m.value===e.id||o(v)?"cursor-wait":""]]),checked:(e==null?void 0:e.kelulusan)==="lulus",disabled:m.value===e.id||o(v),onChange:C=>z(C,e.id)},null,42,is)]),s("td",os,[s("div",cs,[s("div",ns,[e.id?(l(),i("a",{key:0,href:"/pendaftaran/verifikasi/"+e.id,class:"flex items-center hover:text-primary",target:"_blank",rel:"noopener noreferrer"},[h(b,{name:"view-finder",size:"18",class:"h-5 w-5"})],8,as)):(l(),i("span",ds,[h(b,{name:"view-finder",size:"18",class:"h-5 w-5"})]))]),s("div",us,[s("button",{class:"flex items-center hover:text-primary",onClick:C=>T(e.id),disabled:(e==null?void 0:e.status)==="diverifikasi"},[h(b,{name:"document-check",size:"18",class:"h-5 w-5"})],8,rs)])])])])}),128))])])])])])]}),_:1}))}});export{ws as default};
