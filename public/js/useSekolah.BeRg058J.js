import{a7 as y,h as t,M as h,U as p,L as d}from"../index.js";const g=y("pagination",()=>{const u=t(20),c=t(1),o=t(1),e=t(null),n=t(null),f=t("");return{per_page:u,page:o,jenjang:e,kecamatan_id:n,search:f,currentPage:c,resetTodefault:()=>{u.value=20,c.value=1,o.value=1,e.value=null,n.value=null,f.value=""}}},{persist:!0});function L(){const u=t(null),c=t([]),o=t(null),e=t(!1),n=g();return{dataSekolah:u,error:o,loadingSekolah:e,sekolahList:c,fetchAllSekolah:async(r=20,l=1,a="",s="",v="")=>{let i=`${d.GET_SEKOLAH_ALL}?per_page=${r}&page=${l}`;a&&a!="null"&&(i+=`&jenjang=${a}`),s&&s!="null"&&(i+=`&kecamatan_id=${s}`),v&&(i+=`&search=${v}`),n.per_page=r,n.page=l,n.currentPage=l,n.jenjang=a,n.kecamatan_id=s,e.value=!0;try{const S=await h.get(i);u.value=S.data}catch{o.value="Failed to load sekolah list"}finally{e.value=!1}},fetchSekolah:async(r,l="")=>{const a=p(d.GET_SEKOLAH,{kecamatan_id:r,jenjang:l});e.value=!0;try{const s=await h.get(a);c.value=s.data.data}catch{o.value="Failed to load sekolah list"}finally{e.value=!1}},fetchSekolahById:async r=>{const l=p(d.GET_SEKOLAH_BY_ID,{id:r});e.value=!0;try{return(await h.get(l)).data.data}catch{return o.value="Failed to load sekolah data",null}finally{e.value=!1}},updateSekolah:async(r,l)=>{const a=p(d.UPDATE_SEKOLAH,{id:r});e.value=!0;try{return(await h.put(a,l)).data.success}catch{return o.value="Failed to update sekolah",!1}finally{e.value=!1}}}}export{L as a,g as u};
