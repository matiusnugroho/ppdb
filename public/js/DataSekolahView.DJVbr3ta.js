import{_ as v,a as b}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.DzSHU-wV.js";import{_ as x}from"./TabelSekolahWithDataComponent.vue_vue_type_script_setup_true_lang.CjISoT6M.js";import{u as w,a as T}from"./useSekolah.-Q69jCYp.js";import{u as $}from"./useKecamatan.CAPM-1Cn.js";import{b as C}from"./buatOption.z1xkZk61.js";import{j as D}from"./jenjang.DlmV0PPG.js";import{d as K,f as t,A as N,k as o,g as O,o as A,m as B,w as F,b as s,u as r}from"../index.js";import"./authComposable.-2CSDGmy.js";import"./logo-ppdb.BW9ypDwz.js";import"./NoDataComponent.vue_vue_type_script_setup_true_lang.D90P74yI.js";import"./usePendaftaran.CHmvws99.js";import"./FilterSelect.rASVtTtr.js";import"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CuUXFzUo.js";const W=K({__name:"DataSekolahView",setup(V){const{kecamatanList:m,fetchKecamatan:l}=$(),g=t(""),p=t(""),u=t(),_=N(()=>{const e=C(m.value,"nama","id");return[{value:null,label:"Semua Kecamatan"},...e]}),d=t([{label:"Semua Jenjang",value:null},...D]),a=w(),{fetchAllSekolah:n,loadingSekolah:c,dataSekolah:j}=T(),k={total:0,currentPage:1,prevPage:null,nextPage:null,lastPage:1,data:[]};o(g,e=>{a.kecamatan_id=e,n(a.per_page,1,a.jenjang,a.kecamatan_id)}),o(p,e=>{a.jenjang=e,n(a.per_page,1,a.jenjang,a.kecamatan_id)}),o(u,e=>{a.per_page=e,n(a.per_page,1,a.jenjang,a.kecamatan_id)});const f=e=>{a.page=e,a.currentPage=e,n(a.per_page,a.page,a.jenjang,a.kecamatan_id)},P=()=>{a.page=a.page+1,a.currentPage=a.currentPage+1,n(a.per_page,a.page,a.jenjang,a.kecamatan_id)},h=()=>{a.page=a.page-1,a.currentPage=a.currentPage-1,n(a.per_page,a.page,a.jenjang,a.kecamatan_id)},S=(e,i)=>{g.value=e,p.value=i};return O(async()=>{await a.resetTodefault(),l(),n(a.per_page,a.page,a.jenjang,a.kecamatan_id)}),(e,i)=>(A(),B(b,null,{default:F(()=>[s(v,{pageTitle:"Data Sekolah"}),s(x,{"kecamatan-options":_.value,"jenjang-options":d.value,data:r(c)?k:r(j),loading:r(c),needimportbutton:!0,onFilter:S,onPrevPage:h,onNextPage:P,onPageChange:f},null,8,["kecamatan-options","jenjang-options","data","loading"])]),_:1}))}});export{W as default};
