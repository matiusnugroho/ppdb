import{_ as T}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.js";import{_ as F}from"./BreadcrumbDefault.vue_vue_type_script_setup_true_lang.js";import{f as R,g as N,j as A,o as m,k as H,w as E,d as i,a as s,p as a,t as n,c as p,h as Y,F as q,A as G,n as x}from"../index.js";import{u as J,g as K}from"./getDataById.js";import{_ as f}from"./HeroIcon.vue_vue_type_script_setup_true_lang.js";import{_ as O,s as Q}from"./ConfirmationComponent.vue_vue_type_script_setup_true_lang.js";import{s as P}from"./toast.js";import"./authComposable.js";import"./SpinnerLoading.vue_vue_type_script_setup_true_lang.js";import"./_plugin-vue_export-helper.js";const U={class:"container mx-auto"},W={class:"flex flex-wrap -mx-4"},X={class:"w-full md:w-1/2 px-4 mb-6 md:mb-0"},Z={class:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-4"},ss={class:"flex flex-col md:flex-row items-start"},ts={class:"mb-4 md:mb-0 md:mr-6"},es=["src"],as={class:"flex-1"},ls={class:"mb-4"},ns={class:"flex"},os={class:"flex"},is={class:"flex"},rs={class:"flex"},ds={class:"flex"},ms={class:"flex"},fs={class:"flex"},us={class:"flex"},ps={class:"flex"},xs={class:"flex"},bs={class:"w-full md:w-1/2 px-2"},gs={class:"overflow-hidden rounded-sm p-2 border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},_s={class:"space-y-1"},ks={class:"flex items-center"},cs={class:"flex-shrink-0"},vs={class:"ml-2 flex-1"},ws={class:"text-lg font-semibold text-gray-900"},hs={class:"px-2 flex md:justify-end xsm:justify-center xsm:my-4 items-center"},ys=["data-tip"],Vs=["href"],Cs={key:1,class:"flex items-center cursor-not-allowed text-gray-400 bg-gray-100 px-3 py-1 text-sm font-semibold rounded mr-2"},Bs=["disabled","onClick"],Ds=["disabled","onClick"],As=R({__name:"DataPendaftaranView",setup(Ns){const z=G().params.id,{getDetailVerifikasi:L,dataDetailVerifikasi:l,loadingVerifikasi:S,verifikasiDokumen:$}=J(),u=N(null),r=N(""),b=o=>{var t;r.value="",r.value=o,(t=u.value)==null||t.show()},j=async()=>{var t;const o=await $(r.value);if(o.success){(t=u.value)==null||t.close();let d=K(l.value.documents,r.value);d&&(d.status=o.data.status),P({type:"success",message:"Verifikasi pendaftaran berhasil"})}else P({type:"error",message:"Verifikasi document gagal, "+o.message})},M=()=>{var o;r.value="",(o=u.value)==null||o.close()};return A(async()=>{await L(z)}),(o,t)=>(m(),H(T,null,{default:E(()=>{var d,g,_,k,c,v,w,h,y,V,C,B,D;return[i(F,{pageTitle:"Data Pendaftaran"}),s("div",U,[s("div",W,[s("div",X,[s("div",Z,[t[21]||(t[21]=s("h2",{class:"text-xl font-semibold mb-4"},"Registration & Student Info",-1)),s("div",ss,[s("div",ts,[s("img",{class:"w-32 h-32 rounded-md object-cover",src:(d=a(l))==null?void 0:d.student.foto_url,alt:"Student Photo"},null,8,es)]),s("div",as,[s("div",ls,[s("p",ns,[t[0]||(t[0]=s("strong",{class:"w-40"},"Registration Number",-1)),t[1]||(t[1]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((g=a(l))==null?void 0:g.registration_number),1)]),s("p",os,[t[2]||(t[2]=s("strong",{class:"w-40"},"Status",-1)),t[3]||(t[3]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((_=a(l))==null?void 0:_.status),1)]),s("p",is,[t[4]||(t[4]=s("strong",{class:"w-40"},"Verified By",-1)),t[5]||(t[5]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((c=(k=a(l))==null?void 0:k.verified_by)==null?void 0:c.username),1)])]),t[20]||(t[20]=s("h2",{class:"text-xl font-semibold mb-4"},"Student Info",-1)),s("div",null,[s("p",rs,[t[6]||(t[6]=s("strong",{class:"w-40"},"Name",-1)),t[7]||(t[7]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((v=a(l))==null?void 0:v.student.nama),1)]),s("p",ds,[t[8]||(t[8]=s("strong",{class:"w-40"},"NISN",-1)),t[9]||(t[9]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((w=a(l))==null?void 0:w.student.nisn),1)]),s("p",ms,[t[10]||(t[10]=s("strong",{class:"w-40"},"Birth Place",-1)),t[11]||(t[11]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((h=a(l))==null?void 0:h.student.tempat_lahir),1)]),s("p",fs,[t[12]||(t[12]=s("strong",{class:"w-40"},"Birth Date",-1)),t[13]||(t[13]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((y=a(l))==null?void 0:y.student.tanggal_lahir),1)]),s("p",us,[t[14]||(t[14]=s("strong",{class:"w-40"},"Father's Name",-1)),t[15]||(t[15]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((V=a(l))==null?void 0:V.student.nama_bapak),1)]),s("p",ps,[t[16]||(t[16]=s("strong",{class:"w-40"},"Mother's Name",-1)),t[17]||(t[17]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((C=a(l))==null?void 0:C.student.nama_ibu),1)]),s("p",xs,[t[18]||(t[18]=s("strong",{class:"w-40"},"Parent's Phone",-1)),t[19]||(t[19]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((B=a(l))==null?void 0:B.student.no_hp_ortu),1)])])])])])]),s("div",bs,[s("div",gs,[t[26]||(t[26]=s("h2",{class:"text-xl font-semibold mb-2"},"Documents",-1)),s("div",_s,[(m(!0),p(q,null,Y((D=a(l))==null?void 0:D.documents,e=>(m(),p("div",{key:e.id,class:"bg-white shadow-lg rounded-lg overflow-hidden w-full p-2"},[s("div",ks,[s("div",cs,[i(f,{name:"document",size:"32",class:"text-blue-500"})]),s("div",vs,[s("h2",ws,n(e.document_type.label),1),s("span",{class:x(["mt-1 inline-block px-2 py-1 text-sm font-medium rounded-full",a(Q)[e.status]])},n(e.status),3)])]),s("div",hs,[s("div",{class:"tooltip","data-tip":e.url_path?"Lihat":"Tidak ada file"},[e.url_path?(m(),p("a",{key:0,href:e.url_path,class:"flex items-center justify-center px-3 py-1 text-sm font-semibold text-blue-600 bg-blue-200 rounded hover:bg-blue-300 hover:text-blue-700 mr-2",target:"_blank",rel:"noopener noreferrer"},[i(f,{name:"view-finder",size:"18",class:"h-5 w-5"}),t[22]||(t[22]=s("span",{class:"ml-2"},"Lihat",-1))],8,Vs)):(m(),p("span",Cs,[i(f,{name:"view-finder",size:"18",class:"h-5 w-5"}),t[23]||(t[23]=s("span",{class:"ml-2"},"Lihat",-1))]))],8,ys),s("button",{disabled:!e.url_path||e.status==="diverifikasi",class:x(["px-3 py-1 text-sm font-semibold rounded flex items-center mr-2",e.url_path&&e.status!=="diverifikasi"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"]),onClick:I=>b(e.id)},[i(f,{name:"circle-check",size:"18",class:"h-5 w-5"}),t[24]||(t[24]=s("span",{class:"ml-2"},"Verifikasi",-1))],10,Bs),s("button",{disabled:!e.url_path,class:x(["px-3 py-1 text-sm font-semibold rounded hover:bg-red-200 flex items-center",{"bg-red-100 text-red-700":e.url_path,"bg-gray-100 text-red-500 cursor-not-allowed":!e.url_path}]),onClick:I=>b(e.id)},[i(f,{name:"close",size:"18",class:"h-5 w-5"}),t[25]||(t[25]=s("span",{class:"ml-2"},"Tolak",-1))],10,Ds)])]))),128))])])])])]),i(O,{ref_key:"verifikasiModal",ref:u,title:"Verifikasi pendaftaran",message:"Apakah anda yakin ingin verifikasi dokumen ini?",confirmLabel:"Ya",cancelLabel:"Batal",loading:a(S),confirmHandler:j,cancelHandler:M},null,8,["loading"])]}),_:1}))}});export{As as default};
