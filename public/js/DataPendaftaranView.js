import{_ as K}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.js";import{_ as Q}from"./BreadcrumbDefault.vue_vue_type_script_setup_true_lang.js";import{f as R,g as _,o as f,c as p,T as W,j as a,a as s,N as X,t as n,d as r,i as Z,w as F,F as A,m as ss,e as es,B as ts,n as j}from"../index.js";import{u as as,g as I}from"./getDataById.js";import{_ as v}from"./HeroIcon.vue_vue_type_script_setup_true_lang.js";import{v as ls,_ as os,s as ns}from"./ConfirmationComponent.vue_vue_type_script_setup_true_lang.js";import{s as h}from"./toast.js";import{_ as is}from"./SpinnerLoading.vue_vue_type_script_setup_true_lang.js";import{T as rs}from"./TextAreaGroup.js";import{h as ds}from"./hasError.js";import"./authComposable.js";import"./_plugin-vue_export-helper.js";import"./formValidationErrors.js";const us={class:"modal-box"},ms={class:"modal-action justify-center"},cs=["disabled"],fs=R({__name:"ModalComponent",props:{title:{type:String,default:"Hello!"},message:{type:String,default:"Press ESC key or click on ✕ button to close."},confirmLabel:{type:String,default:"Confirm"},cancelLabel:{type:String,default:"Cancel"},confirmHandler:{type:Function,default:()=>{alert("Confirmed")}},cancelHandler:{type:Function,default:()=>{alert("Cancelled")}},loading:{type:Boolean,default:!1},closeOnClickOutside:{type:Boolean,default:!1}},setup(g,{expose:M}){const m=_(null),b=g;M({show:()=>{var t;(t=m.value)==null||t.showModal()},close:()=>{var t;(t=m.value)==null||t.close()}});const x=()=>{m.value.close()},V=()=>{b.loading||(b.confirmHandler(),x())},u=()=>{b.cancelHandler(),x()},w=t=>{var y;const c=t.target;b.closeOnClickOutside&&((y=m.value)!=null&&y.open)&&!c.closest(".modal-box")&&x()};return(t,c)=>(f(),p("dialog",{ref_key:"modal",ref:m,class:"modal"},[W((f(),p("div",us,[s("form",{method:"dialog"},[s("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:x},"✕")]),X(t.$slots,"default"),s("div",ms,[s("button",{class:"btn btn-sm",onClick:u},n(g.cancelLabel),1),s("button",{class:"btn btn-sm btn-primary",disabled:g.loading,onClick:V},[r(is,{loading:g.loading,size:"xs"},null,8,["loading"]),s("span",null,n(g.confirmLabel),1)],8,cs)])])),[[a(ls),w]])],512))}}),ps={class:"container mx-auto"},gs={class:"flex flex-wrap -mx-4"},bs={class:"w-full md:w-1/2 px-4 mb-6 md:mb-0"},xs={class:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-4"},ks={class:"flex flex-col md:flex-row items-start"},vs={class:"mb-4 md:mb-0 md:mr-6"},_s=["src"],ws={class:"flex-1"},ys={class:"mb-4"},hs={class:"flex"},Cs={class:"flex"},Vs={class:"flex"},js={class:"flex"},Ms={class:"flex"},Bs={class:"flex"},Ls={class:"flex"},Ss={class:"flex"},$s={class:"flex"},Ds={class:"flex"},Ns={class:"w-full md:w-1/2 px-2"},Hs={class:"overflow-hidden rounded-sm p-2 border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Ts={class:"space-y-1"},Ps={class:"flex items-center"},zs={class:"flex-shrink-0"},Os={class:"ml-2 flex-1"},Fs={class:"text-lg font-semibold text-gray-900"},As={class:"px-2 flex md:justify-end xsm:justify-center xsm:my-4 items-center"},Is=["data-tip"],Rs=["href"],Es={key:1,class:"flex items-center cursor-not-allowed text-gray-400 bg-gray-100 px-3 py-1 text-sm font-semibold rounded mr-2"},Gs=["disabled","onClick"],Us=["disabled","onClick"],oe=R({__name:"DataPendaftaranView",setup(g){const m=ts().params.id,{getDetailVerifikasi:b,dataDetailVerifikasi:o,loadingVerifikasi:C,verifikasiDokumen:x,rejectDokumen:V}=as(),u=_(null),w=_(null),t=_(""),c=_(""),y=i=>{var e;t.value="",t.value=i,u.value?(e=u.value)==null||e.show():console.error("verifikasiModal is not defined")},E=i=>{var e;t.value="",c.value="",t.value=i,(e=w.value)==null||e.show()},G=async()=>{var e;const i=await x(t.value);if(i.success){(e=u.value)==null||e.close();let d=I(o.value.documents,t.value);d&&(d.status=i.data.status),h({type:"success",message:"Verifikasi pendaftaran berhasil"})}else h({type:"error",message:"Verifikasi document gagal, "+i.message})},U=async()=>{var d;const i=c.value,e=await V(t.value,i);if(e.success){(d=u.value)==null||d.close();let k=I(o.value.documents,t.value);k&&(k.status=e.data.status),h({type:"success",message:"Verifikasi pendaftaran berhasil"})}else h({type:"error",message:"Verifikasi document gagal, "+e.message})},Y=()=>{},q=()=>{var i;t.value="",(i=u.value)==null||i.close()};return Z(async()=>{await b(m)}),(i,e)=>(f(),p(A,null,[r(K,null,{default:F(()=>{var d,k,B,L,S,$,D,N,H,T,P,z,O;return[r(Q,{pageTitle:"Data Pendaftaran"}),s("div",ps,[s("div",gs,[s("div",bs,[s("div",xs,[e[22]||(e[22]=s("h2",{class:"text-xl font-semibold mb-4"},"Registration & Student Info",-1)),s("div",ks,[s("div",vs,[s("img",{class:"w-32 h-32 rounded-md object-cover",src:(d=a(o))==null?void 0:d.student.foto_url,alt:"Student Photo"},null,8,_s)]),s("div",ws,[s("div",ys,[s("p",hs,[e[1]||(e[1]=s("strong",{class:"w-40"},"Registration Number",-1)),e[2]||(e[2]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((k=a(o))==null?void 0:k.registration_number),1)]),s("p",Cs,[e[3]||(e[3]=s("strong",{class:"w-40"},"Status",-1)),e[4]||(e[4]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((B=a(o))==null?void 0:B.status),1)]),s("p",Vs,[e[5]||(e[5]=s("strong",{class:"w-40"},"Verified By",-1)),e[6]||(e[6]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((S=(L=a(o))==null?void 0:L.verified_by)==null?void 0:S.username),1)])]),e[21]||(e[21]=s("h2",{class:"text-xl font-semibold mb-4"},"Student Info",-1)),s("div",null,[s("p",js,[e[7]||(e[7]=s("strong",{class:"w-40"},"Name",-1)),e[8]||(e[8]=s("span",{class:"mx-2"},":",-1)),s("span",null,n(($=a(o))==null?void 0:$.student.nama),1)]),s("p",Ms,[e[9]||(e[9]=s("strong",{class:"w-40"},"NISN",-1)),e[10]||(e[10]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((D=a(o))==null?void 0:D.student.nisn),1)]),s("p",Bs,[e[11]||(e[11]=s("strong",{class:"w-40"},"Birth Place",-1)),e[12]||(e[12]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((N=a(o))==null?void 0:N.student.tempat_lahir),1)]),s("p",Ls,[e[13]||(e[13]=s("strong",{class:"w-40"},"Birth Date",-1)),e[14]||(e[14]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((H=a(o))==null?void 0:H.student.tanggal_lahir),1)]),s("p",Ss,[e[15]||(e[15]=s("strong",{class:"w-40"},"Father's Name",-1)),e[16]||(e[16]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((T=a(o))==null?void 0:T.student.nama_bapak),1)]),s("p",$s,[e[17]||(e[17]=s("strong",{class:"w-40"},"Mother's Name",-1)),e[18]||(e[18]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((P=a(o))==null?void 0:P.student.nama_ibu),1)]),s("p",Ds,[e[19]||(e[19]=s("strong",{class:"w-40"},"Parent's Phone",-1)),e[20]||(e[20]=s("span",{class:"mx-2"},":",-1)),s("span",null,n((z=a(o))==null?void 0:z.student.no_hp_ortu),1)])])])])])]),s("div",Ns,[s("div",Hs,[e[27]||(e[27]=s("h2",{class:"text-xl font-semibold mb-2"},"Documents",-1)),s("div",Ts,[(f(!0),p(A,null,ss((O=a(o))==null?void 0:O.documents,l=>(f(),p("div",{key:l.id,class:"bg-white shadow-lg rounded-lg overflow-hidden w-full p-2"},[s("div",Ps,[s("div",zs,[r(v,{name:"document",size:"32",class:"text-blue-500"})]),s("div",Os,[s("h2",Fs,n(l.document_type.label),1),s("span",{class:j(["mt-1 inline-block px-2 py-1 text-sm font-medium rounded-full",a(ns)[l.status]])},n(l.status),3)])]),s("div",As,[s("div",{class:"tooltip","data-tip":l.url_path?"Lihat":"Tidak ada file"},[l.url_path?(f(),p("a",{key:0,href:l.url_path,class:"flex items-center justify-center px-3 py-1 text-sm font-semibold text-blue-600 bg-blue-200 rounded hover:bg-blue-300 hover:text-blue-700 mr-2",target:"_blank",rel:"noopener noreferrer"},[r(v,{name:"view-finder",size:"18",class:"h-5 w-5"}),e[23]||(e[23]=s("span",{class:"ml-2"},"Lihat",-1))],8,Rs)):(f(),p("span",Es,[r(v,{name:"view-finder",size:"18",class:"h-5 w-5"}),e[24]||(e[24]=s("span",{class:"ml-2"},"Lihat",-1))]))],8,Is),s("button",{disabled:!l.url_path||l.status==="diverifikasi",class:j(["px-3 py-1 text-sm font-semibold rounded flex items-center mr-2",l.url_path&&l.status!=="diverifikasi"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"]),onClick:J=>y(l.id)},[r(v,{name:"circle-check",size:"18",class:"h-5 w-5"}),e[25]||(e[25]=s("span",{class:"ml-2"},"Verifikasi",-1))],10,Gs),s("button",{disabled:!l.url_path,class:j(["px-3 py-1 text-sm font-semibold rounded hover:bg-red-200 flex items-center",{"bg-red-100 text-red-700":l.url_path,"bg-gray-100 text-red-500 cursor-not-allowed":!l.url_path}]),onClick:J=>E(l.id)},[r(v,{name:"close",size:"18",class:"h-5 w-5"}),e[26]||(e[26]=s("span",{class:"ml-2"},"Tolak",-1))],10,Us)])]))),128))])])])])])]}),_:1}),r(os,{ref_key:"verifikasiModal",ref:u,title:"Verifikasi dokumen",message:"Apakah anda yakin ingin verifikasi dokumen ini?",confirmLabel:"Ya","close-on-click-outside":!0,cancelLabel:"Batal",loading:a(C),confirmHandler:G,cancelHandler:q},null,8,["loading"]),r(fs,{ref_key:"rejectModal",ref:w,title:"Tolak dokumen",message:"Apakah anda yakin ingin menolak dokumen ini?",confirmLabel:"Reject","close-on-click-outside":!0,cancelLabel:"Batal",loading:a(C),confirmHandler:U,cancelHandler:Y},{default:F(()=>[r(rs,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=d=>c.value=d),error:a(ds)("rejectMessage"),name:"rejectMessage",label:"Alasan ditolak"},null,8,["modelValue","error"])]),_:1},8,["loading"]),e[28]||(e[28]=es("> "))],64))}});export{oe as default};
