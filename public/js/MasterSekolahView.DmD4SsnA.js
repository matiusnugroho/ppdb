import{_ as ye,a as _e}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.CVk9NgW6.js";import{d as I,h as c,P as we,l as D,o as X,a as g,c as k,b as e,t as V,j as q,e as t,D as ue,H as Ve,F,k as z,g as E,f as A,A as me,E as xe,C as L,w as G,B as U,r as Se,u as i,n as de,p as je}from"../index.js";import{S as W,b as pe}from"./buatOption.C8iYn14X.js";import{F as ie}from"./FilterSelect.DskikzV_.js";import{_ as Me}from"./NoDataComponent.vue_vue_type_script_setup_true_lang.0N8bNYdP.js";import{I as b}from"./InputGroup.CGOI8iZn.js";import{u as J}from"./useKecamatan.BULQhWxi.js";import{_ as $e}from"./ModalComponent.vue_vue_type_script_setup_true_lang.BTUiagaR.js";import{u as ce,a as Y}from"./useSekolah.QCvUQrm2.js";import{j as be}from"./jenjang.DlmV0PPG.js";import{T as Te}from"./TextAreaGroup.zZQPhliB.js";import{u as Pe}from"./formValidationErrors.YeWR-HPr.js";import{h as j}from"./hasError.DGV2MSht.js";import{f as M}from"./fieldErrorHtml.BloJiExM.js";import"./authComposable.sKl44bRY.js";import"./logo-ppdb.BW9ypDwz.js";import"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CQvHfLuO.js";import"./index.XA6sYOCG.js";const Ce={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4"},Ue={class:"w-full max-w-4xl rounded-lg bg-white shadow-xl max-h-[90vh] overflow-y-auto"},Ne={class:"flex items-center justify-between border-b px-6 py-4"},Le={class:"text-xl font-bold text-gray-900"},Ee={class:"grid grid-cols-1 gap-6 p-6 md:grid-cols-2"},He={class:"flex flex-col gap-1"},De=["disabled"],qe=["value"],Ae={class:"flex justify-end gap-3 border-t bg-gray-50 px-6 py-4"},Ke=["disabled"],Be={key:0,class:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"},Oe=I({__name:"SekolahFormModal",props:{isOpen:{type:Boolean},isEditMode:{type:Boolean},schoolData:{},loading:{type:Boolean}},emits:["close","submit"],setup(_,{emit:u}){const x=_,h=u,{kecamatanList:$,fetchKecamatan:N}=J(),S=c([]),o=we({nama_sekolah:"",nss:"",npsn:"",jenjang:"",alamat:"",no_telp:"",email:"",nama_kepsek:"",kecamatan_id:"",daya_tampung:"",username:"",password:""});D(()=>x.schoolData,l=>{var a,r,T;l&&(o.nama_sekolah=l.nama_sekolah||"",o.nss=l.nss||"",o.npsn=l.npsn||"",o.jenjang=l.jenjang||"",o.alamat=l.alamat||"",o.no_telp=l.no_telp||"",o.email=l.email||"",o.nama_kepsek=l.nama_kepsek||"",o.kecamatan_id=(l.kecamatan_id||((a=l.kecamatan)==null?void 0:a.id)||"").toString(),o.daya_tampung=((r=l.daya_tampung)==null?void 0:r.toString())||"",o.username=((T=l.user)==null?void 0:T.username)||"",o.password="")},{immediate:!0}),X(async()=>{await N(),S.value=$.value});const w=()=>{h("submit",{...o})},f=()=>{h("close")};return(l,a)=>l.isOpen?(g(),k("div",Ce,[e("div",Ue,[e("div",Ne,[e("h3",Le,V(l.isEditMode?"Edit Data Sekolah":"Detail Sekolah"),1),e("button",{onClick:f,class:"text-gray-500 hover:text-gray-700"},a[12]||(a[12]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("form",{onSubmit:q(w,["prevent"])},[e("div",Ee,[t(b,{modelValue:o.nama_sekolah,"onUpdate:modelValue":a[0]||(a[0]=r=>o.nama_sekolah=r),label:"Nama Sekolah",name:"nama_sekolah",required:"",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.nama_kepsek,"onUpdate:modelValue":a[1]||(a[1]=r=>o.nama_kepsek=r),label:"Kepala Sekolah",name:"nama_kepsek",required:"",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.nss,"onUpdate:modelValue":a[2]||(a[2]=r=>o.nss=r),label:"NSS",name:"nss",inputmode:"numeric",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.npsn,"onUpdate:modelValue":a[3]||(a[3]=r=>o.npsn=r),label:"NPSN",name:"npsn",inputmode:"numeric",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.jenjang,"onUpdate:modelValue":a[4]||(a[4]=r=>o.jenjang=r),label:"Jenjang",name:"jenjang",required:"",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.daya_tampung,"onUpdate:modelValue":a[5]||(a[5]=r=>o.daya_tampung=r),label:"Daya Tampung",name:"daya_tampung",inputmode:"numeric",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.no_telp,"onUpdate:modelValue":a[6]||(a[6]=r=>o.no_telp=r),label:"No. Telepon",name:"no_telp",inputmode:"tel",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.alamat,"onUpdate:modelValue":a[7]||(a[7]=r=>o.alamat=r),label:"Alamat",name:"alamat",required:"",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.email,"onUpdate:modelValue":a[8]||(a[8]=r=>o.email=r),label:"Email Sekolah",name:"email",type:"email",required:"",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.username,"onUpdate:modelValue":a[9]||(a[9]=r=>o.username=r),label:"Username Akun",name:"username",disabled:!l.isEditMode},null,8,["modelValue","disabled"]),t(b,{modelValue:o.password,"onUpdate:modelValue":a[10]||(a[10]=r=>o.password=r),label:"Password Akun (Isi jika ingin mengubah)",name:"password",type:"password",disabled:!l.isEditMode,placeholder:"Kosongkan jika tidak ingin mengubah"},null,8,["modelValue","disabled"]),e("div",He,[a[14]||(a[14]=e("label",{class:"mb-1 block text-black"},"Kecamatan",-1)),ue(e("select",{"onUpdate:modelValue":a[11]||(a[11]=r=>o.kecamatan_id=r),class:"w-full rounded border-[1.5px] border-stroke bg-white px-5 py-3 text-black outline-none transition focus:border-primary active:border-primary disabled:bg-gray-100 disabled:cursor-not-allowed",disabled:!l.isEditMode},[a[13]||(a[13]=e("option",{value:"",disabled:""},"Pilih Kecamatan",-1)),(g(!0),k(F,null,z(S.value,r=>(g(),k("option",{key:r.id,value:r.id},V(r.nama),9,qe))),128))],8,De),[[Ve,o.kecamatan_id]])])]),e("div",Ae,[e("button",{type:"button",onClick:f,class:"rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50"},V(l.isEditMode?"Batal":"Tutup"),1),l.isEditMode?(g(),k("button",{key:0,type:"submit",class:"inline-flex items-center rounded-lg bg-primary px-4 py-2 text-sm font-medium text-white hover:bg-opacity-90 disabled:opacity-50",disabled:l.loading},[l.loading?(g(),k("span",Be)):E("",!0),a[15]||(a[15]=A(" Simpan Perubahan "))],8,Ke)):E("",!0)])],32)])])):E("",!0)}}),Fe={class:"flex flex-col h-full rounded-xl bg-white shadow-sm border border-gray-100 overflow-hidden"},ze={class:"p-6 border-b border-gray-100"},Ge={class:"flex flex-wrap justify-between gap-4 items-center"},Ie={class:"flex flex-wrap justify-end gap-2 items-center"},Je={class:"relative w-full sm:w-64"},Re={class:"w-full sm:w-auto"},Qe={class:"text-sm font-medium text-gray-500 bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-100"},We={class:"flex-grow overflow-x-auto overflow-y-auto max-h-[calc(100vh-300px)] custom-scrollbar"},Xe={class:"table table-zebra table-pin-rows"},Ye={key:1},Ze={colspan:"7",class:"text-center"},ea={class:"font-mono text-sm"},aa={class:"flex gap-2"},la=["href","onClick"],oa=["href","onClick"],na=["onClick"],sa={class:"rounded-b-lg border-t border-gray-200 px-4 py-2"},ta={class:"flex justify-end gap-1 text-xs font-medium"},ra={key:0},da=["onClick"],ia={key:1},ua=I({__name:"MasterSekolahTable",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1}},emits:["filter","page-change","prev-page","next-page","refresh"],setup(_,{emit:u}){const x=u,h=ce(),{kecamatanList:$}=J(),{updateSekolah:N,deleteSekolah:S}=Y(),o=c(""),w=c(""),f=c("20"),l=c("");let a=null;const r=c(!1),T=c("view"),P=c(null),v=c(!1),C=c(null),y=c(""),s=c(null),m=me(()=>{const p=pe($.value,"nama","id");return[{value:null,label:"Semua Kecamatan"},...p]}),ge=c([{label:"Semua Jenjang",value:null},...be]),ve=c([{label:"10",value:10},{label:"20",value:20},{label:"50",value:50},{label:"100",value:100}]);D([o,w],()=>{x("filter",o.value,w.value,l.value)}),D(f,p=>{h.per_page=Number(p),x("filter",o.value,w.value,l.value)}),D(l,p=>{a&&clearTimeout(a),a=setTimeout(()=>{h.search=p,x("filter",o.value,w.value,p)},500)});const Z=(p,n,K,B)=>{p.ctrlKey||p.metaKey||p.button===1||(p.preventDefault(),P.value=K,T.value=B,r.value=!0)},ee=()=>{r.value=!1,P.value=null},ke=async p=>{if(!P.value)return;v.value=!0;const n=await N(P.value.id,p);v.value=!1,n?(U({message:"Data sekolah berhasil diperbarui"}),ee(),x("refresh")):U({message:"Gagal memperbarui data sekolah",type:"error"})},he=p=>{var n;s.value=p,y.value=`Apakah anda yakin ingin menghapus sekolah "${p.nama_sekolah}"? Tindakan ini tidak dapat dibatalkan!`,(n=C.value)==null||n.show()},fe=async()=>{if(!s.value)return;v.value=!0;const p=await S(s.value.id);v.value=!1,p.success?(U({message:"Data sekolah berhasil dihapus"}),x("refresh")):U({message:`Gagal menghapus sekolah: ${p.error}`,type:"error"}),s.value=null};return(p,n)=>{var B,ae,le,oe,ne,se;const K=Se("router-link");return g(),k("div",Fe,[e("div",ze,[e("div",Ge,[n[6]||(n[6]=e("h3",{class:"text-lg font-bold text-gray-800"},"Master Data Sekolah",-1)),e("div",Ie,[e("div",Je,[ue(e("input",{"onUpdate:modelValue":n[0]||(n[0]=d=>l.value=d),type:"text",placeholder:"Cari Sekolah...",class:"w-full rounded-lg border border-gray-200 bg-white py-2 pl-10 pr-4 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},null,512),[[xe,l.value]]),t(L,{name:"view-finder",class:"absolute left-3 top-2.5 h-4 w-4 text-gray-400"})]),e("div",Re,[t(W,{modelValue:f.value,"onUpdate:modelValue":n[1]||(n[1]=d=>f.value=d),name:"per_page",options:ve.value,class:"w-full sm:w-auto"},null,8,["modelValue","options"])]),e("span",Qe," Total: "+V(_.loading?"...":(B=_.data)==null?void 0:B.total),1)])])]),e("div",We,[e("table",Xe,[e("thead",null,[e("tr",null,[n[8]||(n[8]=e("th",null,"No",-1)),n[9]||(n[9]=e("th",null,"Nama Sekolah",-1)),e("td",null,[t(ie,{modelValue:w.value,"onUpdate:modelValue":n[2]||(n[2]=d=>w.value=d),options:ge.value,class:"w-full",placeholder:"Jenjang",customClasses:"border-0 shadow-none"},null,8,["modelValue","options"])]),n[10]||(n[10]=e("td",null,"NSS",-1)),n[11]||(n[11]=e("td",null,"NPSN",-1)),n[12]||(n[12]=e("td",null,"Username",-1)),e("td",null,[n[7]||(n[7]=A("Kecamatan ")),t(ie,{modelValue:o.value,"onUpdate:modelValue":n[3]||(n[3]=d=>o.value=d),options:m.value,class:"w-full mt-1",placeholder:"Filter Kecamatan",customClasses:"border-0 shadow-none"},null,8,["modelValue","options"])]),n[13]||(n[13]=e("th",null,"Aksi",-1))])]),e("tbody",null,[_.loading?(g(),k(F,{key:0},z(5,d=>e("tr",{key:d},n[14]||(n[14]=[e("td",{colspan:"7"},[e("div",{class:"flex gap-4"},[e("span",{class:"skeleton h-4 w-8 rounded block"}),e("span",{class:"skeleton h-4 w-36 rounded block"}),e("span",{class:"skeleton h-4 w-24 rounded block"}),e("span",{class:"skeleton h-4 w-24 rounded block"}),e("span",{class:"skeleton h-4 w-24 rounded block"}),e("span",{class:"skeleton h-4 w-36 rounded block"}),e("span",{class:"skeleton h-4 w-12 rounded block"})])],-1)]))),64)):((ae=_.data)==null?void 0:ae.data.length)===0?(g(),k("tr",Ye,[e("th",Ze,[t(Me,{title:"Data Sekolah",message:"Data Tidak Ditemukan"})])])):(g(!0),k(F,{key:2},z((le=_.data)==null?void 0:le.data,(d,H)=>{var te,re;return g(),k("tr",{key:H},[e("td",null,V((i(h).currentPage-1)*i(h).per_page+H+1),1),e("th",null,V(d.nama_sekolah),1),e("td",null,[e("span",{class:de(["px-2 py-1 rounded text-xs font-semibold",{"bg-blue-100 text-blue-700":d.jenjang==="sd","bg-orange-100 text-orange-700":d.jenjang==="smp"}])},V(d.jenjang.toUpperCase()),3)]),e("td",null,V(d.nss||"-"),1),e("td",null,V(d.npsn||"-"),1),e("td",ea,V(((te=d.user)==null?void 0:te.username)||"-"),1),e("td",null,V(((re=d.kecamatan)==null?void 0:re.nama)||"-"),1),e("td",null,[e("div",aa,[t(K,{to:{name:"sekolahDetail",params:{id:d.id},query:{mode:"view"}},custom:""},{default:G(({href:O,navigate:R})=>[e("a",{href:O,onClick:Q=>Z(Q,R,d,"view"),class:"btn btn-sm btn-square btn-ghost text-blue-600 hover:bg-blue-50",title:"Lihat Detail"},[t(L,{name:"eye",class:"w-5 h-5"})],8,la)]),_:2},1032,["to"]),t(K,{to:{name:"sekolahDetail",params:{id:d.id},query:{mode:"edit"}},custom:""},{default:G(({href:O,navigate:R})=>[e("a",{href:O,onClick:Q=>Z(Q,R,d,"edit"),class:"btn btn-sm btn-square btn-ghost text-orange-600 hover:bg-orange-50",title:"Edit Data"},[t(L,{name:"document-text",class:"w-5 h-5"})],8,oa)]),_:2},1032,["to"]),e("button",{onClick:O=>he(d),class:"btn btn-sm btn-square btn-ghost text-red-600 hover:bg-red-50",title:"Hapus Data"},[t(L,{name:"trash",class:"w-5 h-5"})],8,na)])])])}),128))])])]),e("div",sa,[e("ol",ta,[(oe=_.data)!=null&&oe.prevPage?(g(),k("li",ra,[e("a",{onClick:n[4]||(n[4]=q(d=>p.$emit("prev-page"),["prevent"])),href:"#",class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180 hover:bg-gray-50"},[n[15]||(n[15]=e("span",{class:"sr-only"},"Prev Page",-1)),t(L,{name:"chevron-left",class:"size-3"})])])):E("",!0),(g(!0),k(F,null,z(Array.from({length:((ne=_.data)==null?void 0:ne.lastPage)||1},(d,H)=>H+1),d=>(g(),k("li",{key:d},[e("a",{href:"#",class:de(["block size-8 rounded border text-center leading-8",i(h).currentPage===d?"bg-primary text-white border-primary":"text-gray-900 border-gray-100 bg-white hover:bg-gray-100"]),onClick:q(H=>p.$emit("page-change",d),["prevent"])},V(d),11,da)]))),128)),(se=_.data)!=null&&se.nextPage?(g(),k("li",ia,[e("a",{onClick:n[5]||(n[5]=q(d=>p.$emit("next-page"),["prevent"])),href:"#",class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180 hover:bg-gray-50"},[n[16]||(n[16]=e("span",{class:"sr-only"},"Next Page",-1)),t(L,{name:"chevron-right",class:"size-3"})])])):E("",!0)])]),t(Oe,{"is-open":r.value,"is-edit-mode":T.value==="edit","school-data":P.value,loading:v.value,onClose:ee,onSubmit:ke},null,8,["is-open","is-edit-mode","school-data","loading"]),t($e,{ref_key:"deleteModal",ref:C,title:"Hapus Sekolah",message:y.value,"confirm-label":"Hapus","cancel-label":"Batal","confirm-handler":fe,loading:v.value},{default:G(()=>n[17]||(n[17]=[A("Apakah anda yakin ingin menghapus sekolah ini?")])),_:1},8,["message","loading"])])}}}),ma={class:"modal-box w-11/12 max-w-4xl"},pa={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ca={class:"mb-3"},ba=["innerHTML"],ga={class:"mb-3"},va=["innerHTML"],ka={class:"mb-3"},ha=["innerHTML"],fa={class:"mb-3"},ya=["innerHTML"],_a={class:"mb-3"},wa=["innerHTML"],Va={class:"mb-3"},xa=["innerHTML"],Sa={class:"mb-3"},ja=["innerHTML"],Ma={class:"mb-3"},$a=["innerHTML"],Ta={class:"col-span-1 md:col-span-2 mb-3"},Pa=["innerHTML"],Ca={class:"mb-3"},Ua=["innerHTML"],Na={class:"mb-3"},La=["innerHTML"],Ea={class:"modal-action"},Ha=["disabled"],Da={key:0,class:"loading loading-spinner loading-xs"},qa=I({__name:"AddSekolahModal",props:{isOpen:{type:Boolean,required:!0}},emits:["close","success"],setup(_,{emit:u}){const x=_,h=u,$=c(null),{kecamatanList:N,fetchKecamatan:S}=J(),{createSekolah:o}=Y(),w=Pe(),f=c(!1),l=c({}),a=c({nama_sekolah:"",nss:"",npsn:"",jenjang:"",alamat:"",no_telp:"",email:"",nama_kepsek:"",kecamatan_id:"",username:"",password:""}),r=be,T=me(()=>pe(N.value,"nama","id")),P=()=>{a.value={nama_sekolah:"",nss:"",npsn:"",jenjang:"",alamat:"",no_telp:"",email:"",nama_kepsek:"",kecamatan_id:"",username:"",password:""},w.clearErrors(),l.value={}},v=()=>{h("close")},C=async()=>{f.value=!0,w.clearErrors(),l.value={};try{const y=await o(a.value);if(y.success)U({message:"Sekolah berhasil ditambahkan",type:"success"}),P(),h("success"),h("close");else{const s=y.error;typeof s=="object"&&s!==null?U({message:"Gagal menyimpan data sekolah. Periksa inputan.",type:"error"}):U({message:typeof s=="string"?s:"Gagal menyimpan data",type:"error"})}}catch{U({message:"Terjadi kesalahan sistem",type:"error"})}finally{f.value=!1}};return D(()=>x.isOpen,y=>{var s,m;y?((s=$.value)==null||s.showModal(),S()):(m=$.value)==null||m.close()}),X(()=>{var y;x.isOpen&&((y=$.value)==null||y.showModal(),S())}),(y,s)=>(g(),k("dialog",{ref_key:"modalRef",ref:$,class:"modal",onClose:v},[e("div",ma,[e("form",{method:"dialog"},[e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2",onClick:v},"âœ•")]),s[13]||(s[13]=e("h3",{class:"font-bold text-lg mb-6 border-b pb-2"},"Tambah Sekolah Baru",-1)),e("form",{onSubmit:q(C,["prevent"]),class:"space-y-4"},[e("div",pa,[s[11]||(s[11]=e("div",{class:"col-span-1 md:col-span-2"},[e("h4",{class:"text-sm font-semibold text-gray-500 uppercase tracking-wider"},"Informasi Sekolah")],-1)),e("div",ca,[t(b,{label:"Nama Sekolah",name:"nama_sekolah",modelValue:a.value.nama_sekolah,"onUpdate:modelValue":s[0]||(s[0]=m=>a.value.nama_sekolah=m),error:i(j)("nama_sekolah"),placeholder:"Contoh: SDN 1 Teluk Kuantan",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("nama_sekolah")},null,8,ba)]),e("div",ga,[t(W,{label:"Jenjang",options:i(r),modelValue:a.value.jenjang,"onUpdate:modelValue":s[1]||(s[1]=m=>a.value.jenjang=m),error:i(j)("jenjang"),placeholder:"Pilih Jenjang",required:""},null,8,["options","modelValue","error"]),e("div",{innerHTML:i(M)("jenjang")},null,8,va)]),e("div",ka,[t(b,{label:"NSS",name:"nss",modelValue:a.value.nss,"onUpdate:modelValue":s[2]||(s[2]=m=>a.value.nss=m),error:i(j)("nss"),placeholder:"Nomor Statistik Sekolah",inputmode:"numeric",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("nss")},null,8,ha)]),e("div",fa,[t(b,{label:"NPSN",name:"npsn",modelValue:a.value.npsn,"onUpdate:modelValue":s[3]||(s[3]=m=>a.value.npsn=m),error:i(j)("npsn"),placeholder:"Nomor Pokok Sekolah Nasional",inputmode:"numeric",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("npsn")},null,8,ya)]),e("div",_a,[t(b,{label:"Nama Kepala Sekolah",name:"nama_kepsek",modelValue:a.value.nama_kepsek,"onUpdate:modelValue":s[4]||(s[4]=m=>a.value.nama_kepsek=m),error:i(j)("nama_kepsek"),placeholder:"Nama Lengkap dengan Gelar",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("nama_kepsek")},null,8,wa)]),e("div",Va,[t(W,{label:"Kecamatan",options:T.value,modelValue:a.value.kecamatan_id,"onUpdate:modelValue":s[5]||(s[5]=m=>a.value.kecamatan_id=m),error:i(j)("kecamatan_id"),placeholder:"Pilih Kecamatan",required:""},null,8,["options","modelValue","error"]),e("div",{innerHTML:i(M)("kecamatan_id")},null,8,xa)]),e("div",Sa,[t(b,{label:"No. Telepon",name:"no_telp",modelValue:a.value.no_telp,"onUpdate:modelValue":s[6]||(s[6]=m=>a.value.no_telp=m),error:i(j)("no_telp"),placeholder:"Nomor Telepon / HP",inputmode:"tel",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("no_telp")},null,8,ja)]),e("div",Ma,[t(b,{label:"Email Sekolah",name:"email",type:"email",modelValue:a.value.email,"onUpdate:modelValue":s[7]||(s[7]=m=>a.value.email=m),error:i(j)("email"),placeholder:"email@sekolah.sch.id",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("email")},null,8,$a)]),e("div",Ta,[t(Te,{label:"Alamat",name:"alamat",modelValue:a.value.alamat,"onUpdate:modelValue":s[8]||(s[8]=m=>a.value.alamat=m),error:i(j)("alamat"),placeholder:"Alamat lengkap sekolah...",rows:3,required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("alamat")},null,8,Pa)]),s[12]||(s[12]=e("div",{class:"col-span-1 md:col-span-2 mt-4 pt-4 border-t"},[e("h4",{class:"text-sm font-semibold text-gray-500 uppercase tracking-wider"},"Akun Pengguna")],-1)),e("div",Ca,[t(b,{label:"Username",name:"username",modelValue:a.value.username,"onUpdate:modelValue":s[9]||(s[9]=m=>a.value.username=m),error:i(j)("username"),placeholder:"Username untuk login",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("username")},null,8,Ua)]),e("div",Na,[t(b,{label:"Password",name:"password",type:"password",modelValue:a.value.password,"onUpdate:modelValue":s[10]||(s[10]=m=>a.value.password=m),error:i(j)("password"),placeholder:"Password login",required:""},null,8,["modelValue","error"]),e("div",{innerHTML:i(M)("password")},null,8,La)])]),e("div",Ea,[e("button",{type:"button",class:"btn",onClick:v},"Batal"),e("button",{type:"submit",class:"btn btn-primary",disabled:f.value},[f.value?(g(),k("span",Da)):E("",!0),A(" "+V(f.value?"Menyimpan...":"Simpan Sekolah"),1)],8,Ha)])],32)])],544))}}),Aa={class:"mb-4 flex justify-end"},nl=I({__name:"MasterSekolahView",setup(_){const u=ce(),{fetchAllSekolah:x,loadingSekolah:h,dataSekolah:$}=Y(),{fetchKecamatan:N}=J(),S=c(!1),o=()=>{S.value=!0},w=()=>{S.value=!1},f=()=>{l()},l=()=>{x(u.per_page,u.currentPage,u.jenjang,u.kecamatan_id,u.search)},a=v=>{u.page=v,u.currentPage=v,l()},r=()=>{u.page=u.page+1,u.currentPage=u.currentPage+1,l()},T=()=>{u.page=u.page-1,u.currentPage=u.currentPage-1,l()},P=(v,C,y)=>{u.kecamatan_id=v,u.jenjang=C,u.search=y,u.page=1,u.currentPage=1,l()};return X(async()=>{await u.resetTodefault(),N(),l()}),(v,C)=>(g(),je(_e,null,{default:G(()=>[t(ye,{pageTitle:"Master Data Sekolah"}),e("div",Aa,[e("button",{onClick:o,class:"inline-flex items-center justify-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},[t(L,{name:"plus",class:"mr-2 h-5 w-5"}),C[0]||(C[0]=A(" Tambah Sekolah "))])]),t(ua,{data:i($),loading:i(h),onFilter:P,onRefresh:l,onPrevPage:T,onNextPage:r,onPageChange:a},null,8,["data","loading"]),t(qa,{"is-open":S.value,onClose:w,onSuccess:f},null,8,["is-open"])]),_:1}))}});export{nl as default};
