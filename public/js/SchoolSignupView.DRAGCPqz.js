import{h as s,M as K,L as D,d as R,Q as A,A as O,o as C,a as T,p as G,w as L,e as l,b as a,u as e,c as I,t as $,g as z,n as F,f as J,j as Q,R as W,B as X}from"../index.js";import{_ as Y,P as Z}from"./PlainLayout.DTxR3Fxk.js";import{u as x}from"./formValidationErrors.vw9FxGl-.js";import{_ as ee}from"./PasswordInput.vue_vue_type_script_setup_true_lang.DkrJuUef.js";import{u as ae}from"./useKecamatan.BULQhWxi.js";import{f as r}from"./fieldErrorHtml.p5kuqNYR.js";import{I as u}from"./InputGroup.CGOI8iZn.js";import{h as t}from"./hasError.DYOS_8XC.js";import{S as H,b as ne}from"./buatOption.BTQFN8sK.js";import{_ as oe}from"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CQvHfLuO.js";import{T as le}from"./TextAreaGroup.zZQPhliB.js";import"./logo-ppdb.BW9ypDwz.js";import"./login-ilustrasi.CSbcqYU5.js";function se(){const c=s(!1),d=x();return{registerSekolah:async _=>{var m,p;c.value=!0;try{const i=await K.post(D.REGISTER_SEKOLAH,_);return i.data.success?!0:(d.errors=i.data.errors,!1)}catch(i){return d.errors=((p=(m=i.response)==null?void 0:m.data)==null?void 0:p.errors)||{},!1}finally{c.value=!1}},loadingRegister:c}}const re={class:"mb-1"},te=["innerHTML"],ie={class:"mb-1"},ue=["innerHTML"],de={class:"mb-1"},me=["innerHTML"],pe={class:"mb-1"},_e=["innerHTML"],ce={class:"mb-1"},ve=["innerHTML"],fe={class:"mb-1"},ke=["innerHTML"],Ve={class:"mb-1"},be=["innerHTML"],ge={key:0,class:"text-red-500"},he={class:"mb-1"},Se=["innerHTML"],Me={class:"mb-1"},Te=["innerHTML"],Le={class:"mb-1"},He=["innerHTML"],xe={class:"mb-1"},we=["innerHTML"],je={class:"mb-1 mt-3"},Ne=["disabled"],ye={class:"flex items-center gap-2"},$e=R({__name:"SchoolSignupView",setup(c){const d=s(""),v=s(""),_=s(""),m=s(""),p=s(""),i=s(""),f=s(""),k=s(""),V=s(""),b=s(""),g=s(""),w=[{label:"SD",value:"sd"},{label:"SMP",value:"smp"}],j=x(),{registerSekolah:N,loadingRegister:h}=se(),y=A(),{loadingKecamatan:U,kecamatanList:E,fetchKecamatan:P,error:S}=ae(),q=async()=>{const M={nama_sekolah:d.value,nss:v.value,npsn:_.value,jenjang:m.value,alamat:p.value,no_telp:i.value,email:f.value,username:k.value,nama_kepsek:V.value,kecamatan_id:b.value,password:g.value};await N(M)?(y.addMessage("success",{title:"Pendaftaran Berhasil",detail:"Silakan Login dengan akun yang telah dibuat"}),await W.push({name:"pendaftaran"})):X({message:"Gagal Mendaftar, perhatikan kesalahan pengisian data",type:"error"})},B=O(()=>ne(E.value,"nama","id"));return C(()=>{P(),j.clearErrors()}),(M,n)=>(T(),G(Z,null,{default:L(()=>[l(Y,{subtitle:"Daftarkan Sekolah Anda",title:"PPDB Kuantan Singingi"},{default:L(()=>[a("form",{onSubmit:Q(q,["prevent"])},[a("div",re,[l(u,{label:"Nama Sekolah",modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=o=>d.value=o),error:e(t)("nama_sekolah"),name:"nama_sekolah",inputmode:"text",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("nama_sekolah")},null,8,te)]),a("div",ie,[l(u,{label:"Nomor Pokok Sekolah Nasional (NPSN)",modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=o=>_.value=o),error:e(t)("npsn"),name:"npsn",inputmode:"numeric",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("npsn")},null,8,ue)]),a("div",de,[l(u,{label:"Nomor Statistik Sekolah (NSS)",modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=o=>v.value=o),error:e(t)("nss"),name:"nss",inputmode:"numeric",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("nss")},null,8,me)]),a("div",pe,[l(H,{label:"Jenjang",modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=o=>m.value=o),error:e(t)("jenjang"),name:"jenjang",options:w},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("jenjang")},null,8,_e)]),a("div",ce,[l(u,{label:"Nama Kepala Sekolah",modelValue:V.value,"onUpdate:modelValue":n[4]||(n[4]=o=>V.value=o),error:e(t)("nama_kepsek"),name:"nama_kepsek",inputmode:"text",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("nama_kepsek")},null,8,ve)]),a("div",fe,[l(u,{label:"No. Telp",modelValue:i.value,"onUpdate:modelValue":n[5]||(n[5]=o=>i.value=o),error:e(t)("no_telp"),name:"no_telp",inputmode:"numeric",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("no_telp")},null,8,ke)]),a("div",Ve,[l(H,{loading:e(U),label:"Kecamatan",modelValue:b.value,"onUpdate:modelValue":n[6]||(n[6]=o=>b.value=o),error:e(t)("kecamatan_id"),name:"kecamatan_id",options:B.value},null,8,["loading","modelValue","error","options"]),a("div",{innerHTML:e(r)("kecamatan_id")},null,8,be),e(S)?(T(),I("p",ge,$(e(S)),1)):z("",!0)]),a("div",he,[l(le,{error:e(t)("alamat"),name:"alamat",label:"Alamat",modelValue:p.value,"onUpdate:modelValue":n[7]||(n[7]=o=>p.value=o)},null,8,["error","modelValue"]),a("div",{innerHTML:e(r)("alamat")},null,8,Se)]),a("div",Me,[l(u,{label:"Email",modelValue:f.value,"onUpdate:modelValue":n[8]||(n[8]=o=>f.value=o),error:e(t)("email"),name:"email",inputmode:"email",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("email")},null,8,Te)]),a("div",Le,[l(u,{label:"Username",modelValue:k.value,"onUpdate:modelValue":n[9]||(n[9]=o=>k.value=o),error:e(t)("username"),name:"username",inputmode:"text",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("username")},null,8,He)]),a("div",xe,[l(ee,{name:"password",label:"Password",modelValue:g.value,"onUpdate:modelValue":n[10]||(n[10]=o=>g.value=o),error:e(t)("password")},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("password")},null,8,we)]),a("div",je,[a("button",{disabled:e(h),class:"w-full rounded bg-primary p-3 text-white flex justify-center rounded bg-primary py-2 px-6 font-medium text-white hover:bg-opacity-90"},[a("span",ye,[l(oe,{loading:e(h),size:"xs",class:F(["transition-transform duration-300 ease-in-out",e(h)?"translate-x-[-10px]":"translate-x-0"])},null,8,["loading","class"]),n[11]||(n[11]=J(" Daftar "))])],8,Ne)])],32)]),_:1})]),_:1}))}});export{$e as default};
