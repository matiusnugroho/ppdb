import{_ as K,n as O,a as Q}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.DzSHU-wV.js";import{d as W,f as x,g as X,o as f,c as p,b as r,w as $,a as e,u as t,t as o,F as z,j as Z,e as ss,q as es,B as b,C as g,n as k}from"../index.js";import{u as ts}from"./usePendaftaran.CHmvws99.js";import{_ as as}from"./ConfirmationComponent.vue_vue_type_script_setup_true_lang.bBDNRRgc.js";import{g as S}from"./getDataById.CToqdZWp.js";import{_ as ls}from"./ModalComponent.vue_vue_type_script_setup_true_lang.EBgDPvme.js";import{T as ns}from"./TextAreaGroup.xaDRFsBp.js";import{h as os}from"./hasError.BEgvbfcM.js";import"./authComposable.-2CSDGmy.js";import"./logo-ppdb.BW9ypDwz.js";import"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CuUXFzUo.js";import"./index.S2K1e588.js";import"./formValidationErrors.Bg25VS2r.js";const is={diverifikasi:"text-green-700 bg-green-100","menunggu verifikasi":"text-yellow-700 bg-yellow-100","belum upload":"text-gray-700 bg-gray-100",ditolak:"text-red-700 bg-red-100",pending:"text-yellow-700 bg-yellow-100"},rs={class:"container mx-auto"},ds={class:"flex flex-wrap -mx-4"},us={class:"w-full md:w-1/2 px-4 mb-6 md:mb-0"},ms={class:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark p-4"},fs={class:"flex flex-col md:flex-row items-start"},ps={class:"mb-4 md:mb-0 md:mr-6"},gs=["src"],cs={class:"flex-1"},xs={class:"mb-4"},bs={class:"flex"},ks={class:"flex"},vs={class:"flex"},_s={class:"flex"},ws={class:"flex"},ys={class:"flex"},hs={class:"flex"},Vs={class:"flex"},js={class:"flex"},Cs={class:"flex"},Bs={class:"w-full md:w-1/2 px-2"},Ds={class:"overflow-hidden rounded-sm p-2 border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark"},Ms={class:"space-y-1"},Ns={class:"flex items-center"},Ls={class:"flex-shrink-0"},Ts={class:"ml-2 flex-1"},Ps={class:"text-lg font-semibold text-gray-900"},$s={class:"px-2 flex md:justify-end xsm:justify-center xsm:my-4 items-center"},zs=["data-tip"],Ss=["href"],As={key:1,class:"flex items-center cursor-not-allowed text-gray-400 bg-gray-100 px-3 py-1 text-sm font-semibold rounded mr-2"},Hs=["disabled","onClick"],Is=["disabled","onClick"],ee=W({__name:"DataPendaftaranView",setup(Rs){const A=es().params.id,{getDetailVerifikasi:H,dataDetailVerifikasi:l,loadingVerifikasi:v,verifikasiDokumen:I,rejectDokumen:R}=ts(),u=x(null),_=x(null),d=x(""),c=x(""),F=n=>{var s;d.value="",d.value=n,u.value&&((s=u.value)==null||s.show())},q=n=>{var s;d.value="",c.value="",d.value=n,(s=_.value)==null||s.show()},E=async()=>{var s;const n=await I(d.value);if(n.success){(s=u.value)==null||s.close();let i=S(l.value.documents,d.value);i&&(i.status=n.data.status),b({type:"success",message:"Verifikasi pendaftaran berhasil"})}else b({type:"error",message:"Verifikasi document gagal, "+n.message})},G=async()=>{var i;const n=c.value,s=await R(d.value,n);if(s.success){(i=u.value)==null||i.close();let m=S(l.value.documents,d.value);m&&(m.status=s.data.status),b({type:"success",message:"Verifikasi pendaftaran berhasil"})}else b({type:"error",message:"Verifikasi document gagal, "+s.message})},U=()=>{},Y=()=>{var n;d.value="",(n=u.value)==null||n.close()};return X(async()=>{await H(A)}),(n,s)=>(f(),p(z,null,[r(Q,null,{default:$(()=>{var i,m,w,y,h,V,j,C,B,D,M,N,L;return[r(K,{pageTitle:"Data Pendaftaran"}),e("div",rs,[e("div",ds,[e("div",us,[e("div",ms,[s[22]||(s[22]=e("h2",{class:"text-xl font-semibold mb-4"},"Registration & Student Info",-1)),e("div",fs,[e("div",ps,[e("img",{class:"w-32 h-32 rounded-md object-cover",src:((i=t(l))==null?void 0:i.student.thumbnail_url)||t(O),alt:"Student Photo"},null,8,gs)]),e("div",cs,[e("div",xs,[e("p",bs,[s[1]||(s[1]=e("strong",{class:"w-40"},"Registration Number",-1)),s[2]||(s[2]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((m=t(l))==null?void 0:m.registration_number),1)]),e("p",ks,[s[3]||(s[3]=e("strong",{class:"w-40"},"Status",-1)),s[4]||(s[4]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((w=t(l))==null?void 0:w.status),1)]),e("p",vs,[s[5]||(s[5]=e("strong",{class:"w-40"},"Verified By",-1)),s[6]||(s[6]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((h=(y=t(l))==null?void 0:y.verified_by)==null?void 0:h.username),1)])]),s[21]||(s[21]=e("h2",{class:"text-xl font-semibold mb-4"},"Student Info",-1)),e("div",null,[e("p",_s,[s[7]||(s[7]=e("strong",{class:"w-40"},"Name",-1)),s[8]||(s[8]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((V=t(l))==null?void 0:V.student.nama),1)]),e("p",ws,[s[9]||(s[9]=e("strong",{class:"w-40"},"NISN",-1)),s[10]||(s[10]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((j=t(l))==null?void 0:j.student.nisn),1)]),e("p",ys,[s[11]||(s[11]=e("strong",{class:"w-40"},"Birth Place",-1)),s[12]||(s[12]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((C=t(l))==null?void 0:C.student.tempat_lahir),1)]),e("p",hs,[s[13]||(s[13]=e("strong",{class:"w-40"},"Birth Date",-1)),s[14]||(s[14]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((B=t(l))==null?void 0:B.student.tanggal_lahir),1)]),e("p",Vs,[s[15]||(s[15]=e("strong",{class:"w-40"},"Father's Name",-1)),s[16]||(s[16]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((D=t(l))==null?void 0:D.student.nama_bapak),1)]),e("p",js,[s[17]||(s[17]=e("strong",{class:"w-40"},"Mother's Name",-1)),s[18]||(s[18]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((M=t(l))==null?void 0:M.student.nama_ibu),1)]),e("p",Cs,[s[19]||(s[19]=e("strong",{class:"w-40"},"Parent's Phone",-1)),s[20]||(s[20]=e("span",{class:"mx-2"},":",-1)),e("span",null,o((N=t(l))==null?void 0:N.student.no_hp_ortu),1)])])])])])]),e("div",Bs,[e("div",Ds,[s[27]||(s[27]=e("h2",{class:"text-xl font-semibold mb-2"},"Documents",-1)),e("div",Ms,[(f(!0),p(z,null,Z((L=t(l))==null?void 0:L.documents,a=>{var T,P;return f(),p("div",{key:a.id,class:"bg-white shadow-lg rounded-lg overflow-hidden w-full p-2"},[e("div",Ns,[e("div",Ls,[r(g,{name:"document",size:"32",class:"text-blue-500"})]),e("div",Ts,[e("h2",Ps,o((P=(T=a.path_requirement)==null?void 0:T.document_type)==null?void 0:P.label),1),e("span",{class:k(["mt-1 inline-block px-2 py-1 text-sm font-medium rounded-full",t(is)[a.status]])},o(a.status),3)])]),e("div",$s,[e("div",{class:"tooltip","data-tip":a.url_path?"Lihat":"Tidak ada file"},[a.url_path?(f(),p("a",{key:0,href:a.url_path,class:"flex items-center justify-center px-3 py-1 text-sm font-semibold text-blue-600 bg-blue-200 rounded hover:bg-blue-300 hover:text-blue-700 mr-2",target:"_blank",rel:"noopener noreferrer"},[r(g,{name:"view-finder",size:"18",class:"h-5 w-5"}),s[23]||(s[23]=e("span",{class:"ml-2"},"Lihat",-1))],8,Ss)):(f(),p("span",As,[r(g,{name:"view-finder",size:"18",class:"h-5 w-5"}),s[24]||(s[24]=e("span",{class:"ml-2"},"Lihat",-1))]))],8,zs),e("button",{disabled:!a.url_path||a.status==="diverifikasi",class:k(["px-3 py-1 text-sm font-semibold rounded flex items-center mr-2",a.url_path&&a.status!=="diverifikasi"?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-400 cursor-not-allowed"]),onClick:J=>F(a.id)},[r(g,{name:"circle-check",size:"18",class:"h-5 w-5"}),s[25]||(s[25]=e("span",{class:"ml-2"},"Verifikasi",-1))],10,Hs),e("button",{disabled:!a.url_path,class:k(["px-3 py-1 text-sm font-semibold rounded hover:bg-red-200 flex items-center",{"bg-red-100 text-red-700":a.url_path,"bg-gray-100 text-red-500 cursor-not-allowed":!a.url_path}]),onClick:J=>q(a.id)},[r(g,{name:"close",size:"18",class:"h-5 w-5"}),s[26]||(s[26]=e("span",{class:"ml-2"},"Tolak",-1))],10,Is)])])}),128))])])])])])]}),_:1}),r(as,{ref_key:"verifikasiModal",ref:u,title:"Verifikasi dokumen",message:"Apakah anda yakin ingin verifikasi dokumen ini?",confirmLabel:"Ya","close-on-click-outside":!0,cancelLabel:"Batal",loading:t(v),confirmHandler:E,cancelHandler:Y},null,8,["loading"]),r(ls,{ref_key:"rejectModal",ref:_,title:"Tolak dokumen",message:"Apakah anda yakin ingin menolak dokumen ini?",confirmLabel:"Reject","close-on-click-outside":!0,cancelLabel:"Batal",loading:t(v),confirmHandler:G,cancelHandler:U},{default:$(()=>[r(ns,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=i=>c.value=i),error:t(os)("rejectMessage"),name:"rejectMessage",label:"Alasan ditolak"},null,8,["modelValue","error"])]),_:1},8,["loading"]),s[28]||(s[28]=ss("> "))],64))}});export{ee as default};
