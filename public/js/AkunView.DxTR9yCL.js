import{_ as E,a as L}from"./DefaultLayout.vue_vue_type_script_setup_true_lang.6-Gez_Sj.js";import{I as d}from"./InputGroup.CGOI8iZn.js";import{_ as x}from"./PasswordInput.vue_vue_type_script_setup_true_lang.DkrJuUef.js";import{_ as y}from"./SpinnerLoading.vue_vue_type_script_setup_true_lang.CQvHfLuO.js";import{u as z}from"./useAkun.B0bIVCw6.js";import{u as R}from"./useSetting.AcB-_o4p.js";import{f as N}from"./fieldErrorHtml.BloJiExM.js";import{d as j,I as H,h as V,A as u,o as I,a as _,p as $,w as i,e as t,b as a,u as p,f as G,c as F,g as O,N as Y,B as m}from"../index.js";import{u as D}from"./formValidationErrors.YeWR-HPr.js";import"./authComposable.sKl44bRY.js";import"./logo-ppdb.BW9ypDwz.js";const X={class:"min-h-screen"},q={class:"max-w-4xl mx-auto space-y-6 sm:space-y-0 sm:grid sm:grid-cols-2 sm:gap-6"},J={class:"bg-white dark:bg-boxdark rounded-lg shadow-sm border border-stroke dark:border-strokedark"},K={class:"p-6 border-t border-stroke dark:border-strokedark space-y-4"},Q=["innerHTML"],W={class:"p-6 border-t border-stroke dark:border-strokedark flex justify-end"},Z={class:"flex items-center gap-2"},ee={key:0,class:"bg-white dark:bg-boxdark rounded-lg shadow-sm border border-stroke dark:border-strokedark"},ae={class:"p-6 border-t border-stroke dark:border-strokedark space-y-4"},oe={class:"p-6 border-t border-stroke dark:border-strokedark flex justify-end"},ge=j({__name:"AkunView",setup(se){const{settingData:r,fetchSetting:U,updateSetting:C,isLoading:M}=R(),n=H(),A=Y(),{loadingAkun:P,updateAkun:B}=z(),b=V(""),l=V({username:n.user.username,email:n.user.email,currentPassword:"",newPassword:"",confirmPassword:""}),w=u({get:()=>{var o;return(o=r.value.social_media)==null?void 0:o.instagram},set:o=>{r.value.social_media.instagram=o}}),v=u({get:()=>{var o;return(o=r.value.social_media)==null?void 0:o.twitter},set:o=>{r.value.social_media.twitter=o}}),g=u({get:()=>{var o;return(o=r.value.social_media)==null?void 0:o.tiktok},set:o=>{r.value.social_media.tiktok=o}}),k=u({get:()=>{var o;return(o=r.value.social_media)==null?void 0:o.facebook},set:o=>{r.value.social_media.facebook=o}}),c=u({get:()=>{var o;return(o=r.value.social_media)==null?void 0:o.youtube},set:o=>{r.value.social_media.youtube=o}}),f=u({get:()=>r.value.url_video_tutorial,set:o=>{r.value.url_video_tutorial=o}}),h=D(),S=async()=>{const o=Object.fromEntries(Object.entries(l.value).filter(([,s])=>s)),e=await B(o);if(e.success)l.value.username!==b.value?(m({type:"success",message:"Username berhasil diubah, silakan login kembali"}),await n.logout(),A.push({name:"login"})):m({type:"success",message:"Akun berhasil diperbarui"});else{const s=e.errors;h.errors=s,m({type:"error",message:e.message})}},T=async()=>{const o={url_video_tutorial:f.value,social_media:{instagram:w.value,twitter:v.value,tiktok:g.value,facebook:k.value,youtube:c.value}},e=await C(o);e!=null&&e.success?m({type:"success",message:"Pengaturan berhasil disimpan"}):m({type:"error",message:(e==null?void 0:e.message)||"Gagal menyimpan pengaturan"})};return I(async()=>{h.clearErrors(),await U(),n.user&&(b.value=n.user.username,l.value.username=n.user.username,l.value.email=n.user.email)}),(o,e)=>(_(),$(L,null,{default:i(()=>[t(E,{pageTitle:"Akun"}),a("div",X,[a("div",q,[a("div",J,[e[13]||(e[13]=a("div",{class:"p-6"},[a("h2",{class:"text-xl font-semibold text-black dark:text-white"},"Ubah data akun")],-1)),a("div",K,[t(d,{modelValue:l.value.username,"onUpdate:modelValue":e[0]||(e[0]=s=>l.value.username=s),label:"Username",name:"username",placeholder:"Enter new username"},{default:i(()=>e[10]||(e[10]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"4"}),a("path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8"})],-1)])),_:1},8,["modelValue"]),t(d,{modelValue:l.value.email,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value.email=s),label:"Email",name:"email",placeholder:"Email baru"},{default:i(()=>e[11]||(e[11]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"4"}),a("path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8"})],-1)])),_:1},8,["modelValue"]),t(x,{modelValue:l.value.currentPassword,"onUpdate:modelValue":e[2]||(e[2]=s=>l.value.currentPassword=s),label:"Password sekarang",name:"currentPassword",type:"password",placeholder:"Masukkan password sekarang"},null,8,["modelValue"]),a("div",{innerHTML:p(N)("currentPassword")},null,8,Q),t(x,{modelValue:l.value.newPassword,"onUpdate:modelValue":e[3]||(e[3]=s=>l.value.newPassword=s),label:"Pawword Baru",name:"newPassword",type:"password",placeholder:"Enter new password"},null,8,["modelValue"])]),a("div",W,[a("button",{onClick:S,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[a("span",Z,[t(y,{loading:p(P),size:"xs"},null,8,["loading"]),e[12]||(e[12]=G(" Simpan "))])])])]),p(n).role==="super_admin"?(_(),F("div",ee,[e[22]||(e[22]=a("div",{class:"p-6"},[a("h2",{class:"text-xl font-semibold text-black dark:text-white"},"Pengaturan Global & Media Sosial")],-1)),a("div",ae,[t(d,{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=s=>f.value=s),label:"Link Video Tutorial (Youtube)",name:"videoTutorial",placeholder:"https://youtube.com/watch?v=..."},{default:i(()=>e[14]||(e[14]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.33 29 29 0 0 0-.46-5.33z"}),a("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})],-1)])),_:1},8,["modelValue"]),e[20]||(e[20]=a("div",{class:"divider text-sm text-gray-400"},"Media Sosial",-1)),t(d,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=s=>k.value=s),label:"Facebook URL",name:"facebook",placeholder:"https://facebook.com/..."},{default:i(()=>e[15]||(e[15]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"})],-1)])),_:1},8,["modelValue"]),t(d,{modelValue:w.value,"onUpdate:modelValue":e[6]||(e[6]=s=>w.value=s),label:"Instagram URL",name:"instagram",placeholder:"https://instagram.com/..."},{default:i(()=>e[16]||(e[16]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",ry:"5"}),a("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),a("line",{x1:"17.5",y1:"6.5",x2:"17.51",y2:"6.5"})],-1)])),_:1},8,["modelValue"]),t(d,{modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=s=>v.value=s),label:"Twitter / X URL",name:"twitter",placeholder:"https://twitter.com/..."},{default:i(()=>e[17]||(e[17]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"})],-1)])),_:1},8,["modelValue"]),t(d,{modelValue:c.value,"onUpdate:modelValue":e[8]||(e[8]=s=>c.value=s),label:"Youtube Channel URL",name:"youtube",placeholder:"https://youtube.com/@..."},{default:i(()=>e[18]||(e[18]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.33 29 29 0 0 0-.46-5.33z"}),a("polygon",{points:"9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"})],-1)])),_:1},8,["modelValue"]),t(d,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=s=>g.value=s),label:"TikTok URL",name:"tiktok",placeholder:"https://tiktok.com/@..."},{default:i(()=>e[19]||(e[19]=[a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M21 8v8a5 5 0 0 1-5 5H8a5 5 0 0 1-5-5V8a5 5 0 0 1 5-5h8a5 5 0 0 1 5 5z"}),a("path",{d:"M10 12a3 3 0 1 1-3 3V6a3 3 0 0 1 3-3"})],-1)])),_:1},8,["modelValue"])]),a("div",oe,[a("button",{onClick:T,class:"px-4 py-2 bg-primary text-white rounded-lg hover:bg-opacity-90 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2"},[t(y,{loading:p(M),size:"xs"},null,8,["loading"]),e[21]||(e[21]=a("span",null,"Simpan Pengaturan",-1))])])])):O("",!0)])])]),_:1}))}});export{ge as default};
