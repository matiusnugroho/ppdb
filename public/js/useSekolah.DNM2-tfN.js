import{a9 as E,h as o,M as f,U as k,L as p}from"../index.js";import{u as g}from"./formValidationErrors.YeWR-HPr.js";const _=E("pagination",()=>{const c=o(20),i=o(1),l=o(1),e=o(null),n=o(null),S=o("");return{per_page:c,page:l,jenjang:e,kecamatan_id:n,search:S,currentPage:i,resetTodefault:()=>{c.value=20,i.value=1,l.value=1,e.value=null,n.value=null,S.value=""}}},{persist:!0});function O(){const c=o(null),i=o([]),l=o(null),e=o(!1),n=_();return{dataSekolah:c,error:l,loadingSekolah:e,sekolahList:i,fetchAllSekolah:async(r=20,s=1,a="",t="",d="")=>{let u=`${p.GET_SEKOLAH_ALL}?per_page=${r}&page=${s}`;a&&a!="null"&&(u+=`&jenjang=${a}`),t&&t!="null"&&(u+=`&kecamatan_id=${t}`),d&&(u+=`&search=${d}`),n.per_page=r,n.page=s,n.currentPage=s,n.jenjang=a,n.kecamatan_id=t,e.value=!0;try{const h=await f.get(u);c.value=h.data}catch{l.value="Failed to load sekolah list"}finally{e.value=!1}},fetchSekolah:async(r,s="")=>{const a=k(p.GET_SEKOLAH,{kecamatan_id:r,jenjang:s});e.value=!0;try{const t=await f.get(a);i.value=t.data.data}catch{l.value="Failed to load sekolah list"}finally{e.value=!1}},fetchSekolahById:async r=>{const s=k(p.GET_SEKOLAH_BY_ID,{id:r});e.value=!0;try{return(await f.get(s)).data.data}catch{return l.value="Failed to load sekolah data",null}finally{e.value=!1}},updateSekolah:async(r,s)=>{const a=k(p.UPDATE_SEKOLAH,{id:r});e.value=!0;try{return(await f.put(a,s)).data.success}catch{return l.value="Failed to update sekolah",!1}finally{e.value=!1}},createSekolah:async r=>{var t,d,u,h;const s=p.REGISTER_SEKOLAH,a=g();e.value=!0,l.value=null;try{return{success:!0,data:(await f.post(s,r)).data}}catch(v){return l.value=((d=(t=v.response)==null?void 0:t.data)==null?void 0:d.message)||"Failed to create sekolah",(h=(u=v.response)==null?void 0:u.data)!=null&&h.errors&&(a.errors=v.response.data.errors),{success:!1,error:l.value}}finally{e.value=!1}}}}export{O as a,_ as u};
