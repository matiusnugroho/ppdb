import{d as W,f as c,A as H,k as x,g as q,o as l,c as o,a as e,b as p,C as z,p as h,t as r,u as d,F as g,j as m,i as j,n as R,L as X}from"../index.js";import{_ as G}from"./NoDataComponent.vue_vue_type_script_setup_true_lang.D90P74yI.js";import{u as Q}from"./usePendaftaran.CHmvws99.js";import{u as Y,a as Z}from"./useSekolah.-Q69jCYp.js";import{S as ee,b as ae}from"./buatOption.z1xkZk61.js";import{u as te}from"./useKecamatan.CAPM-1Cn.js";import{j as ne}from"./jenjang.DlmV0PPG.js";import{F as L}from"./FilterSelect.rASVtTtr.js";const le={class:"flex flex-col h-full rounded-xl bg-white shadow-sm border border-gray-100 overflow-hidden"},oe={class:"p-6 border-b border-gray-100"},se={class:"flex flex-wrap justify-between gap-4 items-center"},re={class:"flex flex-wrap justify-end gap-2 items-center"},de={class:"w-full sm:w-auto"},ue={class:"inline-flex rounded-lg shadow-sm"},ie={class:"tooltip","data-tip":"Download Excel"},pe={key:0,class:"tooltip","data-tip":"Import Excel"},ge={class:"inline-block p-2.5 text-gray-500 hover:bg-gray-50 hover:text-blue-600 transition-colors rounded-r-lg",title:"Delete Product"},me={class:"text-sm font-medium text-gray-500 bg-gray-50 px-3 py-1.5 rounded-lg border border-gray-100"},ce={class:"flex-grow overflow-x-auto overflow-y-auto max-h-[calc(100vh-300px)] custom-scrollbar"},be={class:"table table-zebra table-pin-rows"},fe={key:1},ke={colspan:"5",class:"text-center"},ve={class:"rounded-b-lg border-t border-gray-200 px-4 py-2"},ye={class:"flex justify-end gap-1 text-xs font-medium"},_e={key:0},we=["onClick"],xe={key:1},Ve=W({__name:"TabelSekolahWithDataComponent",props:{data:{type:Object,required:!1},loading:{type:Boolean,default:!1},needimportbutton:{type:Boolean,default:!1}},setup(k){const{kecamatanList:O,fetchKecamatan:E}=te(),v=c(""),y=c(""),_=c(),A=H(()=>{const s=ae(O.value,"nama","id");return[{value:null,label:"Semua Kecamatan"},...s]}),B=c([{label:"Semua Jenjang",value:null},...ne]),K=c([{label:"10",value:10},{label:"25",value:25},{label:"50",value:50},{label:"100",value:100},{label:"Semua",value:"all"}]),a=Y(),{fetchAllSekolah:i,loadingSekolah:S,dataSekolah:b}=Z();x(v,s=>{a.kecamatan_id=s,i(a.per_page,1,a.jenjang,a.kecamatan_id)}),x(y,s=>{a.jenjang=s,i(a.per_page,1,a.jenjang,a.kecamatan_id)}),x(_,s=>{a.per_page=s,i(a.per_page,1,a.jenjang,a.kecamatan_id)});const $=s=>{a.page=s,a.currentPage=s,i(a.per_page,a.page,a.jenjang,a.kecamatan_id)},J=()=>{a.page=a.page+1,a.currentPage=a.currentPage+1,i(a.per_page,a.page,a.jenjang,a.kecamatan_id)},F=()=>{a.page=a.page-1,a.currentPage=a.currentPage-1,i(a.per_page,a.page,a.jenjang,a.kecamatan_id)},M=()=>{const s=X.DOWNLOAD_EXCEL_SEKOLAH_WITH_DATA,t=new URLSearchParams;a.jenjang!==null&&t.append("jenjang",a.jenjang),a.kecamatan_id!==null&&t.append("kecamatan_id",a.kecamatan_id),a.per_page!==null&&t.append("per_page",a.per_page),a.page!==null&&t.append("page",a.page);const f=`${s}?${t.toString()}`;window.open(f,"_blank")},{fetchJalurPendaftaran:U,dataJalurPendaftaran:w}=Q();return q(async()=>{await a.resetTodefault(),E(),i(a.per_page,a.page,a.jenjang,a.kecamatan_id),U()}),(s,t)=>{var f,P,N,C,D,T;return l(),o("div",le,[e("div",oe,[e("div",se,[t[3]||(t[3]=e("h3",{class:"text-lg font-bold text-gray-800"},"Data Sekolah",-1)),e("div",re,[e("div",de,[p(ee,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=n=>_.value=n),name:"per_page",options:K.value,class:"w-full sm:w-auto"},null,8,["modelValue","options"])]),e("div",ue,[e("div",ie,[e("button",{class:"inline-block border-e p-2.5 text-gray-500 hover:bg-gray-50 hover:text-blue-600 transition-colors rounded-l-lg border-gray-200",title:"Edit Product",onClick:M},[p(z,{name:"file-spreadsheet",size:"18",class:"h-5 w-5"})])]),k.needimportbutton?(l(),o("div",pe,[e("button",ge,[p(z,{name:"upload-double",size:"18",class:"h-5 w-5"})])])):h("",!0)]),e("span",me," Total: "+r(d(S)?"...":(f=d(b))==null?void 0:f.total),1)])])]),e("div",ce,[e("table",be,[e("thead",null,[e("tr",null,[t[4]||(t[4]=e("th",null,"Nama Sekolah",-1)),e("td",null,[p(L,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=n=>y.value=n),options:B.value,class:"w-full",placeholder:"Jenjang",customClasses:"border-0 shadow-none"},null,8,["modelValue","options"])]),t[5]||(t[5]=e("td",null,"NSS",-1)),t[6]||(t[6]=e("td",null,"NPSN",-1)),t[7]||(t[7]=e("td",null,"Daya Tampung",-1)),(l(!0),o(g,null,m(d(w),(n,u)=>(l(),o("td",{key:u},r(n.name),1))),128)),e("td",null,[p(L,{modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=n=>v.value=n),options:A.value,class:"w-full",placeholder:"Kecamatan",customClasses:"border-0 shadow-none"},null,8,["modelValue","options"])])])]),e("tbody",null,[d(S)?(l(),o(g,{key:0},m(5,n=>e("tr",{key:n},t[8]||(t[8]=[e("th",null,[e("span",{class:"skeleton h-4 w-36 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1),e("td",null,[e("span",{class:"skeleton h-4 w-24 rounded block"})],-1)]))),64)):((P=d(b))==null?void 0:P.data.length)===0?(l(),o("tr",fe,[e("th",ke,[p(G,{title:"Data Sekolah",message:"Data Tidak Ditemukan"})])])):(l(!0),o(g,{key:2},m((N=d(b))==null?void 0:N.data,(n,u)=>(l(),o("tr",{key:u},[e("th",null,r(n.nama_sekolah),1),e("td",null,r(n.jenjang),1),e("td",null,r(n.nss),1),e("td",null,r(n.npsn),1),e("td",null,r(n.daya_tampung),1),(l(!0),o(g,null,m(d(w),(V,I)=>(l(),o("td",{key:I},r(n.path_counts&&n.path_counts[V.name]?n.path_counts[V.name]:0),1))),128)),e("td",null,r(n.kecamatan.nama),1)]))),128))]),e("tfoot",null,[e("tr",null,[t[9]||(t[9]=e("th",null,"Nama Sekolah",-1)),t[10]||(t[10]=e("td",null,"Jenjang",-1)),t[11]||(t[11]=e("td",null,"NSS",-1)),t[12]||(t[12]=e("td",null,"NPSN",-1)),t[13]||(t[13]=e("td",null,"Daya Tampung",-1)),(l(!0),o(g,null,m(d(w),(n,u)=>(l(),o("td",{key:u},r(n.name),1))),128)),t[14]||(t[14]=e("td",null,"Kecamatan",-1))])])])]),e("div",ve,[e("ol",ye,[(C=k.data)!=null&&C.prevPage?(l(),o("li",_e,[e("a",{onClick:j(F,["prevent"]),href:"#cikontot",class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180"},t[15]||(t[15]=[e("span",{class:"sr-only"},"Prev Page",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"size-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)]))])):h("",!0),(l(!0),o(g,null,m(Array.from({length:((D=d(b))==null?void 0:D.lastPage)||1},(n,u)=>u+1),n=>(l(),o("li",{key:n},[e("a",{href:"#",class:R(["block size-8 rounded border text-center leading-8",d(a).currentPage===n?"bg-primary text-white border-primary hover:bg-blue-500":"text-gray-900 border-gray-100 bg-white hover:bg-gray-100"]),onClick:j(u=>$(n),["prevent"])},r(n),11,we)]))),128)),(T=k.data)!=null&&T.nextPage?(l(),o("li",xe,[e("a",{onClick:j(J,["prevent"]),href:"#cikontot",class:"inline-flex size-8 items-center justify-center rounded border border-gray-100 bg-white text-gray-900 rtl:rotate-180"},t[16]||(t[16]=[e("span",{class:"sr-only"},"Next Page",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"size-3",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)]))])):h("",!0)])])])}}});export{Ve as _};
