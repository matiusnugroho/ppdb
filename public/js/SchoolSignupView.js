import{g as s,h as B,E as D,f as A,A as C,s as O,i as R,o as M,k as G,w as L,d as l,a,j as e,c as I,t as $,q as z,n as F,e as J,p as Q,C as W}from"../index.js";import{_ as X,a as Y,P as Z}from"./PlainLayout.js";import{u as x}from"./formValidationErrors.js";import{s as ee}from"./toast.js";import{u as ae,S as H,b as ne}from"./buatOption.js";import{f as r}from"./fieldErrorHtml.js";import{I as d}from"./InputGroup.js";import{h as t}from"./hasError.js";import{_ as oe}from"./SpinnerLoading.vue_vue_type_script_setup_true_lang.js";import{T as le}from"./TextAreaGroup.js";import"./login-ilustrasi.js";import"./HeroIcon.vue_vue_type_script_setup_true_lang.js";import"./_plugin-vue_export-helper.js";function se(){const _=s(!1),u=x();return{registerSekolah:async c=>{var m,p;_.value=!0;try{const i=await B.post(D.REGISTER_SEKOLAH,c);return i.data.success?!0:(u.errors=i.data.errors,!1)}catch(i){return console.error("Update profile error:",i.response),u.errors=((p=(m=i.response)==null?void 0:m.data)==null?void 0:p.errors)||{},!1}finally{_.value=!1}},loadingRegister:_}}const re={class:"mb-1"},te=["innerHTML"],ie={class:"mb-1"},de=["innerHTML"],ue={class:"mb-1"},me=["innerHTML"],pe={class:"mb-1"},ce=["innerHTML"],_e={class:"mb-1"},ve=["innerHTML"],fe={class:"mb-1"},ke=["innerHTML"],Ve={class:"mb-1"},be=["innerHTML"],ge={key:0,class:"text-red-500"},he={class:"mb-1"},Se=["innerHTML"],Te={class:"mb-1"},Me=["innerHTML"],Le={class:"mb-1"},He=["innerHTML"],xe={class:"mb-1"},we=["innerHTML"],je={class:"mb-1 mt-3"},Ne=["disabled"],ye={class:"flex items-center gap-2"},$e=A({__name:"SchoolSignupView",setup(_){const u=s(""),v=s(""),c=s(""),m=s(""),p=s(""),i=s(""),f=s(""),k=s(""),V=s(""),b=s(""),g=s(""),w=[{label:"SD",value:"sd"},{label:"SMP",value:"smp"}],j=x(),{registerSekolah:N,loadingRegister:h}=se(),y=C(),{loadingKecamatan:U,kecamatanList:E,fetchKecamatan:P,error:S}=ae(),q=async()=>{const T={nama_sekolah:u.value,nss:v.value,npsn:c.value,jenjang:m.value,alamat:p.value,no_telp:i.value,email:f.value,username:k.value,nama_kepsek:V.value,kecamatan_id:b.value,password:g.value};await N(T)?(y.addMessage("success",{title:"Pendaftaran Berhasil",detail:"Silakan Login dengan akun yang telah dibuat"}),await W.push({name:"pendaftaran"})):ee({message:"Gagal Mendaftar, perhatikan kesalahan pengisian data",type:"error"})},K=O(()=>ne(E.value,"nama","id"));return R(()=>{P(),j.clearErrors()}),(T,n)=>(M(),G(Z,null,{default:L(()=>[l(Y,{subtitle:"Daftarkan Sekolah Anda",title:"PPDB Kuantan Singingi"},{default:L(()=>[a("form",{onSubmit:Q(q,["prevent"])},[a("div",re,[l(d,{label:"Nama Sekolah",modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=o=>u.value=o),error:e(t)("nama_sekolah"),name:"nama_sekolah",inputmode:"text",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("nama_sekolah")},null,8,te)]),a("div",ie,[l(d,{label:"Nomor Pokok Sekolah Nasional (NPSN)",modelValue:c.value,"onUpdate:modelValue":n[1]||(n[1]=o=>c.value=o),error:e(t)("npsn"),name:"npsn",inputmode:"numeric",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("npsn")},null,8,de)]),a("div",ue,[l(d,{label:"Nomor Statistik Sekolah (NSS)",modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]=o=>v.value=o),error:e(t)("nss"),name:"nss",inputmode:"numeric",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("nss")},null,8,me)]),a("div",pe,[l(H,{label:"Jenjang",modelValue:m.value,"onUpdate:modelValue":n[3]||(n[3]=o=>m.value=o),error:e(t)("jenjang"),name:"jenjang",options:w},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("jenjang")},null,8,ce)]),a("div",_e,[l(d,{label:"Nama Kepala Sekolah",modelValue:V.value,"onUpdate:modelValue":n[4]||(n[4]=o=>V.value=o),error:e(t)("nama_kepsek"),name:"nama_kepsek",inputmode:"text",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("nama_kepsek")},null,8,ve)]),a("div",fe,[l(d,{label:"No. Telp",modelValue:i.value,"onUpdate:modelValue":n[5]||(n[5]=o=>i.value=o),error:e(t)("no_telp"),name:"no_telp",inputmode:"numeric",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("no_telp")},null,8,ke)]),a("div",Ve,[l(H,{loading:e(U),label:"Kecamatan",modelValue:b.value,"onUpdate:modelValue":n[6]||(n[6]=o=>b.value=o),error:e(t)("kecamatan_id"),name:"kecamatan_id",options:K.value},null,8,["loading","modelValue","error","options"]),a("div",{innerHTML:e(r)("kecamatan_id")},null,8,be),e(S)?(M(),I("p",ge,$(e(S)),1)):z("",!0)]),a("div",he,[l(le,{error:e(t)("alamat"),name:"alamat",label:"Alamat",modelValue:p.value,"onUpdate:modelValue":n[7]||(n[7]=o=>p.value=o)},null,8,["error","modelValue"]),a("div",{innerHTML:e(r)("alamat")},null,8,Se)]),a("div",Te,[l(d,{label:"Email",modelValue:f.value,"onUpdate:modelValue":n[8]||(n[8]=o=>f.value=o),error:e(t)("email"),name:"email",inputmode:"email",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("email")},null,8,Me)]),a("div",Le,[l(d,{label:"Username",modelValue:k.value,"onUpdate:modelValue":n[9]||(n[9]=o=>k.value=o),error:e(t)("username"),name:"username",inputmode:"text",required:""},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("username")},null,8,He)]),a("div",xe,[l(X,{name:"password",label:"Password",modelValue:g.value,"onUpdate:modelValue":n[10]||(n[10]=o=>g.value=o),error:e(t)("password")},null,8,["modelValue","error"]),a("div",{innerHTML:e(r)("password")},null,8,we)]),a("div",je,[a("button",{disabled:e(h),class:"w-full rounded bg-primary p-3 text-white flex justify-center rounded bg-primary py-2 px-6 font-medium text-white hover:bg-opacity-90"},[a("span",ye,[l(oe,{loading:e(h),size:"xs",class:F(["transition-transform duration-300 ease-in-out",e(h)?"translate-x-[-10px]":"translate-x-0"])},null,8,["loading","class"]),n[11]||(n[11]=J(" Daftar "))])],8,Ne)])],32)]),_:1})]),_:1}))}});export{$e as default};
