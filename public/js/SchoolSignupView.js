import{g as r,l as P,E as B,f as R,z as C,j as D,o as u,k as F,w as M,d as T,a,s as n,v as l,a0 as $,p as k,c as p,h as j,F as q,t as L,i as G,q as I,B as O}from"../index.js";import{_ as z,a as J,P as Q}from"./PlainLayout.js";import{u as S}from"./formValidationErrors.js";import{s as W}from"./toast.js";import{u as X}from"./useKecamatan.js";import"./login-ilustrasi.js";import"./HeroIcon.vue_vue_type_script_setup_true_lang.js";import"./_plugin-vue_export-helper.js";function Y(){const c=r(!1),d=S();return{registerSekolah:async b=>{var i,m;c.value=!0;try{const s=await P.post(B.REGISTER_SEKOLAH,b);return s.data.success?!0:(d.errors=s.data.errors,!1)}catch(s){return console.error("Update profile error:",s.response),d.errors=((m=(i=s.response)==null?void 0:i.data)==null?void 0:m.errors)||{},!1}finally{c.value=!1}},loadingRegister:c}}const Z={class:"mb-5.5"},ee=["innerHTML"],ae={class:"mb-5.5"},te=["innerHTML"],re={class:"mb-5.5"},oe=["innerHTML"],se={class:"mb-5.5"},ne=["innerHTML"],le={class:"mb-5.5"},de=["innerHTML"],ie={class:"mb-5.5"},me={key:0,disabled:"",value:""},ue={key:1,disabled:"",value:""},be=["value"],ke=["innerHTML"],pe={key:0,class:"text-red-500"},ce={class:"mb-5.5"},fe=["innerHTML"],ve={class:"mb-5.5"},xe=["innerHTML"],ge={class:"mb-5.5"},ye=["innerHTML"],_e={class:"mb-5.5"},we=["innerHTML"],he={class:"mb-5.5"},Me=["disabled"],Ae=R({__name:"SchoolSignupView",setup(c){const d=r(""),f=r(""),b=r(""),i=r(""),m=r(""),s=r(""),x=r(""),g=r(""),y=r(""),_=r(""),w=S(),{registerSekolah:H,loadingRegister:V}=Y(),U=C(),{loadingKecamatan:N,kecamatanList:E,fetchKecamatan:A,error:h}=X(),K=async()=>{const v={nama_sekolah:d.value,nss:f.value,npsn:b.value,alamat:i.value,no_telp:m.value,email:s.value,username:x.value,nama_kepsek:g.value,kecamatan_id:y.value,password:_.value};await H(v)?(U.addMessage("success",{title:"Pendaftaran Berhasil",detail:"Silakan Login dengan akun yang telah dibuat"}),await O.push({name:"login"})):W({message:"Gagal Mendaftar, perhatikan kesalahan pengisian data",type:"error"})},o=v=>{const e=w.errors[v];return e&&e.length>0?`
      <span class="flex items-center font-medium tracking-wide text-red-500 text-xs mt-1 ml-1">
        ${e.join(", ")}
      </span>
    `:""};return D(()=>{A(),w.clearErrors()}),(v,e)=>(u(),F(Q,null,{default:M(()=>[T(J,{subtitle:"Start for free",title:"Sign Up to TailAdmin"},{default:M(()=>[a("form",{onSubmit:I(K,["prevent"])},[a("div",Z,[e[10]||(e[10]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"fullName"},"Nama Sekolah",-1)),n(a("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),class:"w-full rounded border border-stroke bg-gray py-3 pr-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"fullName",id:"fullName"},null,512),[[l,d.value]]),a("div",{innerHTML:o("nama_sekolah")},null,8,ee)]),a("div",ae,[e[11]||(e[11]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"npsn"},"NPSN",-1)),n(a("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"npsn",id:"npsn",inputmode:"numeric"},null,512),[[l,b.value]]),a("div",{innerHTML:o("npsn")},null,8,te)]),a("div",re,[e[12]||(e[12]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"nss"},"NSS",-1)),n(a("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"nss",id:"nss",inputmode:"numeric"},null,512),[[l,f.value]]),a("div",{innerHTML:o("nss")},null,8,oe)]),a("div",se,[e[13]||(e[13]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"nama_kepsek"},"Nama Kepsek",-1)),n(a("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>g.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"nama_kepsek",id:"nama_kepsek"},null,512),[[l,g.value]]),a("div",{innerHTML:o("nama_kepsek")},null,8,ne)]),a("div",le,[e[14]||(e[14]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"no_telp"},"No. Telp",-1)),n(a("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"no_telp",id:"no_telp",inputmode:"numeric"},null,512),[[l,m.value]]),a("div",{innerHTML:o("no_telp")},null,8,de)]),a("div",ie,[e[15]||(e[15]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"kecamatan_id"},"Kecamatan",-1)),n(a("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>y.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",name:"kecamatan_id",id:"kecamatan_id"},[k(N)?(u(),p("option",me,"Sedang mengambil data kecamatan")):(u(),p("option",ue,"Pilih Kecamatan")),(u(!0),p(q,null,j(k(E),t=>(u(),p("option",{key:t.id,value:t.id},L(t.nama),9,be))),128))],512),[[$,y.value]]),a("div",{innerHTML:o("kecamatan_id")},null,8,ke),k(h)?(u(),p("p",pe,L(k(h)),1)):G("",!0)]),a("div",ce,[e[16]||(e[16]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"alamat"},"Alamat",-1)),n(a("textarea",{"onUpdate:modelValue":e[6]||(e[6]=t=>i.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",name:"alamat",id:"alamat",rows:"4"},null,512),[[l,i.value]]),a("div",{innerHTML:o("alamat")},null,8,fe)]),a("div",ve,[e[17]||(e[17]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"emailAddress"},"Email Address",-1)),n(a("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>s.value=t),class:"w-full rounded border border-stroke bg-gray py-3 pr-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"email",name:"emailAddress",id:"emailAddress",inputmode:"email"},null,512),[[l,s.value]]),a("div",{innerHTML:o("email")},null,8,xe)]),a("div",ge,[e[18]||(e[18]=a("label",{class:"mb-3 block text-sm font-medium text-black dark:text-white",for:"Username"},"Username",-1)),n(a("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>x.value=t),class:"w-full rounded border border-stroke bg-gray py-3 px-4.5 font-normal text-black focus:border-primary focus-visible:outline-none dark:border-strokedark dark:bg-meta-4 dark:text-white dark:focus:border-primary",type:"text",name:"Username",id:"Username"},null,512),[[l,x.value]]),a("div",{innerHTML:o("username")},null,8,ye)]),a("div",_e,[T(z,{label:"Password",modelValue:_.value,"onUpdate:modelValue":e[9]||(e[9]=t=>_.value=t)},null,8,["modelValue"]),a("div",{innerHTML:o("password")},null,8,we)]),a("div",he,[a("button",{disabled:k(V),class:"w-full rounded bg-primary p-3 text-white"},"Submit",8,Me)])],32)]),_:1})]),_:1}))}});export{Ae as default};
